<!DOCTYPE html>
<html>
<head>
    

    

    
<!-- Baidu Tongji -->
<script>var _hmt = _hmt || []</script>
<script async src="//hm.baidu.com/hm.js?e778f01a25bfd3914f44bdddc1fc0aba"></script>
<!-- End Baidu Tongji -->




    <meta charset="utf-8">
    
    
    
    
    <title>2018SummerHZOIè®¨è®º | æµ™æ±Ÿå¤§å‚»å±Œ&#39;s Blog | è°è¯´æˆ‘ä»¬ä¸€å®šè¦èµ°åˆ«äººçš„è·¯ã€‚</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="ACM,å¹³è¡¡æ ‘,è´ªå¿ƒ,äºŒåˆ†,dp,LCA,dpä¼˜åŒ–">
    <meta name="description" content="HZOIä¸“é¢˜è®¨è®ºä¸œå—å¤§å­¦ å¼ å»ºä¸œ  2018å¹´8æœˆ  å¹³è¡¡æ ‘BSTå…ˆå¤ä¹ ä¸€ä¸‹äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBinary Search Treeï¼‰ï¼Œï¼ˆåˆï¼šäºŒå‰æœç´¢æ ‘ï¼ŒäºŒå‰æ’åºæ ‘ï¼‰å®ƒæˆ–è€…æ˜¯ä¸€æ£µç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„äºŒå‰æ ‘ï¼š è‹¥å®ƒçš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› è‹¥å®ƒçš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› å®ƒçš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æ’åºæ ‘ã€‚   æ’å…¥å‘äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥æ–°å…ƒ">
<meta name="keywords" content="ACM,å¹³è¡¡æ ‘,è´ªå¿ƒ,äºŒåˆ†,dp,LCA,dpä¼˜åŒ–">
<meta property="og:type" content="article">
<meta property="og:title" content="2018SummerHZOIè®¨è®º">
<meta property="og:url" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/index.html">
<meta property="og:site_name" content="æµ™æ±Ÿå¤§å‚»å±Œ&#39;s Blog">
<meta property="og:description" content="HZOIä¸“é¢˜è®¨è®ºä¸œå—å¤§å­¦ å¼ å»ºä¸œ  2018å¹´8æœˆ  å¹³è¡¡æ ‘BSTå…ˆå¤ä¹ ä¸€ä¸‹äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBinary Search Treeï¼‰ï¼Œï¼ˆåˆï¼šäºŒå‰æœç´¢æ ‘ï¼ŒäºŒå‰æ’åºæ ‘ï¼‰å®ƒæˆ–è€…æ˜¯ä¸€æ£µç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„äºŒå‰æ ‘ï¼š è‹¥å®ƒçš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› è‹¥å®ƒçš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› å®ƒçš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æ’åºæ ‘ã€‚   æ’å…¥å‘äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥æ–°å…ƒ">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/8644ebf81a4c510f0b3dafdf6359252dd52aa57e.jpg">
<meta property="og:image" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/20140210215304296.png">
<meta property="og:image" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/1349877709_4105.png">
<meta property="og:image" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/1349877744_7090.png">
<meta property="og:image" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/1349877779_5253.png">
<meta property="og:image" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/1503_1.jpg">
<meta property="og:image" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/1209138-20170729151024207-1541824194.png">
<meta property="og:image" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/1533147876533.png">
<meta property="og:image" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/1533149366004.png">
<meta property="og:image" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/1533188420861.png">
<meta property="og:image" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/1533186362463.png">
<meta property="og:updated_time" content="2018-08-02T16:46:11.382Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="2018SummerHZOIè®¨è®º">
<meta name="twitter:description" content="HZOIä¸“é¢˜è®¨è®ºä¸œå—å¤§å­¦ å¼ å»ºä¸œ  2018å¹´8æœˆ  å¹³è¡¡æ ‘BSTå…ˆå¤ä¹ ä¸€ä¸‹äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBinary Search Treeï¼‰ï¼Œï¼ˆåˆï¼šäºŒå‰æœç´¢æ ‘ï¼ŒäºŒå‰æ’åºæ ‘ï¼‰å®ƒæˆ–è€…æ˜¯ä¸€æ£µç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„äºŒå‰æ ‘ï¼š è‹¥å®ƒçš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› è‹¥å®ƒçš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› å®ƒçš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æ’åºæ ‘ã€‚   æ’å…¥å‘äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥æ–°å…ƒ">
<meta name="twitter:image" content="http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/8644ebf81a4c510f0b3dafdf6359252dd52aa57e.jpg">
    
        <link rel="alternate" type="application/atom+xml" title="æµ™æ±Ÿå¤§å‚»å±Œ&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Jerome</h5>
          <a href="mailto:zjd_x1998@163.com" title="zjd_x1998@163.com" class="mail">zjd_x1998@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                ä¸»é¡µ
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                å½’æ¡£
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ ‡ç­¾
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                åˆ†ç±»
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/zjdx1998" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-link"></i>
                ç®€å†
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">2018SummerHZOIè®¨è®º</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="è¾“å…¥æ„Ÿå…´è¶£çš„å…³é”®å­—">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">2018SummerHZOIè®¨è®º</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-08-02T15:26:13.000Z" itemprop="datePublished" class="page-time">
  2018-08-02
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/ACM/">ACM</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#HZOIä¸“é¢˜è®¨è®º"><span class="post-toc-number">1.</span> <span class="post-toc-text">HZOIä¸“é¢˜è®¨è®º</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#å¹³è¡¡æ ‘"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">å¹³è¡¡æ ‘</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#BST"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">BST</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æ’å…¥"><span class="post-toc-number">1.1.1.1.</span> <span class="post-toc-text">æ’å…¥</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æŸ¥æ‰¾"><span class="post-toc-number">1.1.1.2.</span> <span class="post-toc-text">æŸ¥æ‰¾</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#åˆ é™¤"><span class="post-toc-number">1.1.1.3.</span> <span class="post-toc-text">åˆ é™¤</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æ€è€ƒ"><span class="post-toc-number">1.1.1.4.</span> <span class="post-toc-text">æ€è€ƒ</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Treap"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">Treap</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å®šä¹‰"><span class="post-toc-number">1.1.2.1.</span> <span class="post-toc-text">å®šä¹‰</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æ›´æ–°"><span class="post-toc-number">1.1.2.2.</span> <span class="post-toc-text">æ›´æ–°</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æ—‹è½¬"><span class="post-toc-number">1.1.2.3.</span> <span class="post-toc-text">æ—‹è½¬</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æ’å…¥-1"><span class="post-toc-number">1.1.2.4.</span> <span class="post-toc-text">æ’å…¥</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#åˆ é™¤-1"><span class="post-toc-number">1.1.2.5.</span> <span class="post-toc-text">åˆ é™¤</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æŸ¥æ’å"><span class="post-toc-number">1.1.2.6.</span> <span class="post-toc-text">æŸ¥æ’å</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æŸ¥å‰é©±åç»§"><span class="post-toc-number">1.1.2.7.</span> <span class="post-toc-text">æŸ¥å‰é©±åç»§</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æŸ¥æ‰¾ç¬¬kå°æ•°"><span class="post-toc-number">1.1.2.8.</span> <span class="post-toc-text">æŸ¥æ‰¾ç¬¬kå°æ•°</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ä¾‹é¢˜è®²è§£"><span class="post-toc-number">1.1.2.9.</span> <span class="post-toc-text">ä¾‹é¢˜è®²è§£</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#POJ1442-Black-Box"><span class="post-toc-number">1.1.2.9.1.</span> <span class="post-toc-text">POJ1442 Black Box </span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#POJ2299-Ultra-QuickSort"><span class="post-toc-number">1.1.2.9.2.</span> <span class="post-toc-text">POJ2299 Ultra-QuickSort </span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#BZOJ3196-TYVJ1730-äºŒé€¼å¹³è¡¡æ ‘"><span class="post-toc-number">1.1.2.9.3.</span> <span class="post-toc-text">BZOJ3196(TYVJ1730)äºŒé€¼å¹³è¡¡æ ‘</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ç»ƒä¹ é¢˜"><span class="post-toc-number">1.1.2.10.</span> <span class="post-toc-text">ç»ƒä¹ é¢˜</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Splay"><span class="post-toc-number">1.1.3.</span> <span class="post-toc-text">Splay</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æ—‹è½¬-1"><span class="post-toc-number">1.1.3.1.</span> <span class="post-toc-text">æ—‹è½¬</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æ€æƒ³"><span class="post-toc-number">1.1.3.2.</span> <span class="post-toc-text">æ€æƒ³</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ä¾‹é¢˜è®²è§£-1"><span class="post-toc-number">1.1.3.3.</span> <span class="post-toc-text">ä¾‹é¢˜è®²è§£</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#éƒé—·çš„å‡ºçº³å‘˜"><span class="post-toc-number">1.1.3.3.1.</span> <span class="post-toc-text">éƒé—·çš„å‡ºçº³å‘˜</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#tyvj1729æ–‡è‰ºå¹³è¡¡æ ‘"><span class="post-toc-number">1.1.3.3.2.</span> <span class="post-toc-text">tyvj1729æ–‡è‰ºå¹³è¡¡æ ‘</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ç»ƒä¹ é¢˜-1"><span class="post-toc-number">1.1.3.4.</span> <span class="post-toc-text">ç»ƒä¹ é¢˜</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#STL"><span class="post-toc-number">1.1.4.</span> <span class="post-toc-text">STL</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#LCA"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">LCA</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Tarjanç®—æ³•"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">Tarjanç®—æ³•</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ä¾‹é¢˜è®²è§£-2"><span class="post-toc-number">1.2.1.1.</span> <span class="post-toc-text">ä¾‹é¢˜è®²è§£</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#POJ-1330-Nearest-Common-Ancestors"><span class="post-toc-number">1.2.1.1.1.</span> <span class="post-toc-text">POJ 1330 Nearest Common Ancestors</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#HDU2586-How-far-away"><span class="post-toc-number">1.2.1.1.2.</span> <span class="post-toc-text">HDU2586 How far away ?</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#å€å¢"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">å€å¢</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ä¾‹é¢˜è®²è§£-3"><span class="post-toc-number">1.2.2.1.</span> <span class="post-toc-text">ä¾‹é¢˜è®²è§£</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#NOIP2013T3-è´§è½¦è¿è¾“"><span class="post-toc-number">1.2.2.1.1.</span> <span class="post-toc-text">NOIP2013T3 è´§è½¦è¿è¾“</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#NOIP2015-T6-è¿è¾“è®¡åˆ’"><span class="post-toc-number">1.2.2.1.2.</span> <span class="post-toc-text">NOIP2015 T6 è¿è¾“è®¡åˆ’</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#RMQã€æ ‘é“¾å‰–åˆ†"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">RMQã€æ ‘é“¾å‰–åˆ†</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ç»ƒä¹ é¢˜-2"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">ç»ƒä¹ é¢˜</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DPä¼˜åŒ–"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">DPä¼˜åŒ–</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#æ•°æ®ç»“æ„ä¼˜åŒ–"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">æ•°æ®ç»“æ„ä¼˜åŒ–</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#çº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„"><span class="post-toc-number">1.3.1.1.</span> <span class="post-toc-text">çº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#NOIP2013T5-èŠ±åŒ "><span class="post-toc-number">1.3.1.1.1.</span> <span class="post-toc-text">NOIP2013T5 èŠ±åŒ </span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å•è°ƒæ ˆã€å•è°ƒé˜Ÿåˆ—"><span class="post-toc-number">1.3.1.2.</span> <span class="post-toc-text">å•è°ƒæ ˆã€å•è°ƒé˜Ÿåˆ—</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Vijos1243ç”Ÿäº§å•†å“-8"><span class="post-toc-number">1.3.1.2.1.</span> <span class="post-toc-text">Vijos1243ç”Ÿäº§å•†å“[8]</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#æ–œç‡ä¼˜åŒ–"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">æ–œç‡ä¼˜åŒ–</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#HDU3507Print-Article"><span class="post-toc-number">1.3.2.1.</span> <span class="post-toc-text">HDU3507Print Article</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#å››è¾¹å½¢ä¼˜åŒ–"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">å››è¾¹å½¢ä¼˜åŒ–</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#çŸ©é˜µåŠ é€Ÿ"><span class="post-toc-number">1.3.4.</span> <span class="post-toc-text">çŸ©é˜µåŠ é€Ÿ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ä¾‹é¢˜è®²è§£-4"><span class="post-toc-number">1.3.4.1.</span> <span class="post-toc-text">ä¾‹é¢˜è®²è§£</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#HDU5950-Recursive-sequence"><span class="post-toc-number">1.3.4.1.1.</span> <span class="post-toc-text">HDU5950 Recursive sequence</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#å…¶ä»–"><span class="post-toc-number">1.3.5.</span> <span class="post-toc-text">å…¶ä»–</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ç»ƒä¹ é¢˜-3"><span class="post-toc-number">1.3.6.</span> <span class="post-toc-text">ç»ƒä¹ é¢˜</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-2018SummerHZOI"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">2018SummerHZOIè®¨è®º</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-08-02 23:26:13" datetime="2018-08-02T15:26:13.000Z"  itemprop="datePublished">2018-08-02</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/ACM/">ACM</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="æ–‡ç« æ€»é˜…è¯»é‡" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="HZOIä¸“é¢˜è®¨è®º"><a href="#HZOIä¸“é¢˜è®¨è®º" class="headerlink" title="HZOIä¸“é¢˜è®¨è®º"></a><center>HZOIä¸“é¢˜è®¨è®º</center></h1><center>ä¸œå—å¤§å­¦ å¼ å»ºä¸œ</center>

<center>2018å¹´8æœˆ</center>

<h2 id="å¹³è¡¡æ ‘"><a href="#å¹³è¡¡æ ‘" class="headerlink" title="å¹³è¡¡æ ‘"></a><center>å¹³è¡¡æ ‘</center></h2><h3 id="BST"><a href="#BST" class="headerlink" title="BST"></a>BST</h3><p>å…ˆå¤ä¹ ä¸€ä¸‹äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBinary Search Treeï¼‰ï¼Œï¼ˆåˆï¼š<a href="https://baike.baidu.com/item/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91" target="_blank" rel="noopener">äºŒå‰æœç´¢æ ‘</a>ï¼ŒäºŒå‰æ’åºæ ‘ï¼‰å®ƒæˆ–è€…æ˜¯ä¸€æ£µç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„<a href="https://baike.baidu.com/item/%E4%BA%8C%E5%8F%89%E6%A0%91" target="_blank" rel="noopener">äºŒå‰æ ‘</a>ï¼š è‹¥å®ƒçš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› è‹¥å®ƒçš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› å®ƒçš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸º<a href="https://baike.baidu.com/item/%E4%BA%8C%E5%8F%89%E6%8E%92%E5%BA%8F%E6%A0%91" target="_blank" rel="noopener">äºŒå‰æ’åºæ ‘</a>ã€‚ </p>
<p><img src="8644ebf81a4c510f0b3dafdf6359252dd52aa57e.jpg" alt=""></p>
<h4 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h4><p>å‘äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥æ–°å…ƒç´ æ—¶ï¼Œå¿…é¡»å…ˆæ£€æµ‹è¿™ä¸ªå…ƒç´ æ˜¯å¦åœ¨æ ‘ä¸­å·²ç»å­˜åœ¨ã€‚å¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ™ä¸è¿›è¡Œæ’å…¥ï¼Œå¦‚æœå…ƒç´ ä¸å­˜åœ¨åˆ™å°†æ–°å…ƒç´ æ’å…¥åˆ°æœç´¢åœæ­¢çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡æ’å…¥éƒ½æ˜¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹ã€‚ </p>
<p>ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œæ¨¡æ‹Ÿæ’å…¥6ã€13ã€20çš„è¿‡ç¨‹ã€‚</p>
<h4 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h4><p>åœ¨ä¸€æ£µä¸ä¸ºç©ºçš„äºŒå‰æœç´¢æ ‘ä¸­æŸ¥æ‰¾å…ƒç´ æ—¶ï¼Œå¦‚æœè¦æŸ¥æ‰¾çš„å…ƒç´ ä¸æ ¹èŠ‚ç‚¹çš„å€¼ç›¸ç­‰ï¼Œåˆ™è¿”å›true æˆ–æ ¹èŠ‚ç‚¹ï¼Œå¦‚æœå°äºæ ¹èŠ‚ç‚¹çš„å€¼ï¼Œåˆ™åœ¨å·¦å­æ ‘æŸ¥æ‰¾ï¼Œå¦‚æœå¤§äºæ ¹èŠ‚ç‚¹çš„å€¼ï¼Œåœ¨å…¶å³å­æ ‘ä¸­æŸ¥æ‰¾ã€‚å¦åˆ™ï¼Œè¿”å›falseæˆ–è€…NULLã€‚</p>
<p>ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œæ¨¡æ‹ŸæŸ¥æ‰¾9ã€17ã€ 21çš„è¿‡ç¨‹ã€‚</p>
<h4 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><p>æƒ…å†µè¾ƒå¤šï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œ<a href="https://blog.csdn.net/a1414345/article/details/70186719" target="_blank" rel="noopener">å…·ä½“å¯ä»¥å‚è€ƒ</a></p>
<h4 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h4><p>å¦‚æœä¸€æ£µæ ‘é™¤æ ¹èŠ‚ç‚¹å¤–çš„æ¯ä¸€æ£µå­æ ‘éƒ½æ— å·¦å­æ ‘æˆ–éƒ½æ— å³å­æ ‘ï¼Œé‚£ä¹ˆä¸Šè¿°ä¸‰ç§æ“ä½œçš„æ•ˆç‡å¦‚ä½•ï¼Ÿ</p>
<p>ç­”æ¡ˆï¼šæ­¤æ—¶æ ‘ä¼šé€€åŒ–ä¸ºé“¾ï¼Œæ•ˆç‡ç”±$O(log n)$é€€åŒ–ä¸º$O(n)$ã€‚</p>
<p>å¦‚ä½•è§£å†³ï¼Ÿ ğŸ‘‡</p>
<h3 id="Treap"><a href="#Treap" class="headerlink" title="Treap"></a>Treap</h3><p>treapæ˜¯ä¸€ç§å¸¸ç”¨æ˜“å†™çš„å¹³è¡¡æ ‘ï¼Œå•ä»å­—æ¯æ„æ€æ¥çœ‹ï¼Œtreap=tree+heapã€‚</p>
<p>å…¶ä¸­ï¼Œtreeå°±æ˜¯BST ï¼Œheapæ˜¯å †ã€‚æ‰€ä»¥treapä¹Ÿå¯ä»¥å«æ ‘å †ã€‚</p>
<p>treapå…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼š<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top-right hint--error hint--large" aria-label="[Treapè¯¦ç»†ä»‹ç»](https://www.cnblogs.com/BCOI/p/9072444.html)
">[1]</span></a></sup></p>
<ul>
<li>Treapæ˜¯å…³äºkeyçš„äºŒå‰æ’åºæ ‘ï¼ˆä¹Ÿå°±æ˜¯è§„å®šçš„æ’åºæ–¹å¼ï¼‰ã€‚</li>
<li>Treapæ˜¯å…³äºpriorityçš„å †ï¼ˆæŒ‰ç…§éšæœºå‡ºçš„ä¼˜å…ˆçº§ä½œä¸ºå°æ ¹/å¤§æ ¹å †)ã€‚ï¼ˆéäºŒå‰å †ï¼Œå› ä¸ºä¸æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼‰</li>
<li>keyå’Œpriorityç¡®å®šæ—¶ï¼Œtreapå”¯ä¸€ã€‚</li>
</ul>
<p>ä¸ºä»€ä¹ˆé™¤äº†æƒå€¼è¿˜è¦åœ¨ç”¨ä¸€ä¸ªéšæœºå€¼ä½œä¸ºæ’åºæ–¹æ³•å‘¢?éšæœºåˆ†é…çš„ä¼˜å…ˆçº§ï¼Œä½¿æ•°æ®æ’å…¥åæ›´ä¸å®¹æ˜“é€€åŒ–ä¸ºé“¾ã€‚å°±åƒæ˜¯å°†å…¶æ‰“ä¹±å†æ’å…¥ã€‚æ‰€ä»¥ç”¨äºå¹³è¡¡äºŒå‰æ ‘ã€‚</p>
<p>æ ¹æ®åå­—ï¼Œä¸éš¾å†™å‡ºå¦‚ä¸‹å®šä¹‰ï¼š</p>
<h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">tNode</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> s[<span class="number">2</span>],pri,v,size;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">    	v = x; size = <span class="number">1</span>; pri = y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;T[N];</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>s[2]</code>ä¸ºå½“å‰èŠ‚ç‚¹çš„ä¸¤ä¸ªå„¿å­,<code>pri</code>è¡¨ç¤ºä¼˜å…ˆçº§,æ˜¯ä¸€ä¸ªéšæœºå€¼ï¼Œ<code>v</code>ä»£è¡¨å½“å‰ç»“ç‚¹ç‚¹æƒã€‚</p>
<h4 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span><span class="params">(<span class="keyword">int</span> &amp;i,<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">    T[i].size = T[L(i)].size + T[R(i)].size + T[i].cnt;<span class="comment">//æˆ‘ä¸Šé¢æ²¡æœ‰å†™cnt,cntç”¨äºç»Ÿè®¡é‡å¤çš„ç‚¹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ—‹è½¬"><a href="#æ—‹è½¬" class="headerlink" title="æ—‹è½¬"></a><strong>æ—‹è½¬</strong></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rot</span><span class="params">(<span class="keyword">int</span> &amp;y,<span class="keyword">int</span> f)</span></span>&#123; <span class="comment">//yä¸ºæ ¹,fæ˜¯æ—‹è½¬æ–¹å‘</span></span><br><span class="line">    <span class="keyword">int</span> x = T[y].s[!f];</span><br><span class="line">    T[y].s[!f] = T[x].s[f];</span><br><span class="line">    T[x].s[f]  = y;</span><br><span class="line">    Update(y);Update(y=x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="20140210215304296.png" alt="å‚è€ƒå›¾" title="">
                </div>
                <div class="image-caption">å‚è€ƒå›¾</div>
            </figure>
<p>ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œå³æ—‹æ“ä½œå°±æ˜¯å°†<code>root=4</code>çš„å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹<code>lson=2</code>çš„å³å­æ ‘å˜ä¸º<code>root=4</code>çš„å·¦å­æ ‘ï¼ŒåŸæ¥çš„å·¦å­æ ‘<code>lson=2</code>å˜ä¸ºæ ‘æ ¹,å†å°†åŸæ ‘æ ¹å˜æˆç°åœ¨æ ‘æ ¹çš„å³å­æ ‘ã€‚å·¦æ—‹åŒç†ï¼Œæ‰€ä»¥ä»£ç å¯ä»¥ä»…ç”¨<code>f,!fæˆ–f^1</code>ç®€å†™ã€‚ å¥—ç”¨ä¸Šé¢çš„ä»£ç :<code>Rot(4,1);</code> </p>
<h4 id="æ’å…¥-1"><a href="#æ’å…¥-1" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> &amp;i,<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!i)&#123;</span><br><span class="line">        T[i=++tot].init(val,rand()); <span class="comment">//æ­¤å¤„randæœ€å¥½æ‰‹å†™ï¼Œè§ä¸‹æ–‡ã€‚</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> f = T[i].v &gt; val;</span><br><span class="line">    Insert(T[i].s[!f],val);</span><br><span class="line">    <span class="keyword">if</span>(T[T[i].s[!f]].pri &gt; T[i].pri) Rot(i,f);</span><br><span class="line">    <span class="keyword">else</span>                             Update(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç å¯ä»¥æ‰‹ç”»ä¸€æ£µ<code>depth&lt;=3</code>çš„æ»¡äºŒå‰æ ‘æ¨¡æ‹Ÿä¸€ä¸‹ï¼Œè¾ƒæ˜“ç†è§£ï¼Œæ­¤å¤„ä¸å¤šè§£é‡Šã€‚</p>
<p>å…³äº<code>rand</code>å‡½æ•°ï¼Œç”¨è¿‡pascalçš„åŒå­¦éƒ½çŸ¥é“pascalçš„éšæœºæ€§èƒ½è¾ƒå¥½ï¼Œnoipè€ƒåœºå¯¹æ‹ä¹Ÿä¸€èˆ¬é€‰æ‹©ç”¨pascalå‡ºéšæœºæ•°æ®ã€‚treapæ˜¯ä¸€ç§é«˜æ•ˆçš„å¹³è¡¡æ ‘ï¼Œä¸ºäº†ä¸è®©c++çš„å†…ç½®randå½±å“æ€§èƒ½ï¼Œå°¤å…¶å½“treapè¢«å¡å¸¸æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹å†™rand:<sup id="fnref:3"><a href="#fn:3" rel="footnote"><span class="hint--top-right hint--error hint--large" aria-label="[treapå­¦ä¹ æ€»ç»“]( https://www.cnblogs.com/fengzhiyuan/articles/7994428.html)
">[3]</span></a></sup></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">rand</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> seed = <span class="number">2333</span>; <span class="comment">//seedä¸ºéšæœºæ•°ç§å­ï¼Œå¯ä»¥ä¿®æ”¹</span></span><br><span class="line">    <span class="keyword">return</span> seed = (<span class="keyword">int</span>)((((seed ^ <span class="number">998244353</span>) + <span class="number">19260817l</span>l) * <span class="number">19890604l</span>l) % <span class="number">1000000007</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åˆ é™¤-1"><a href="#åˆ é™¤-1" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><ul>
<li>å…ˆæ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹çš„ä½ç½®.<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top-right hint--error hint--large" aria-label="[Treapè¯¦ç»†ä»‹ç»](https://www.cnblogs.com/BCOI/p/9072444.html)
">[1]</span></a></sup></li>
<li>å¦‚æœè¿™ä¸ªèŠ‚ç‚¹ä½ç½®ä¸Šæœ‰å¤šä¸ªç›¸åŒçš„æ•°,åˆ™ç›´æ¥cntâ€“.</li>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªå„¿å­æˆ–è€…æ²¡æœ‰å„¿å­,ç›´æ¥å°†é‚£ä¸ªå„¿å­æ¥åˆ°è¿™ä¸ªèŠ‚ç‚¹ä¸‹é¢(æˆ–å°†å„¿å­èµ‹å€¼ä¸º0).</li>
<li>å¦‚æœæœ‰ä¸¤ä¸ªå„¿å­,ç°å°†éšæœºå€¼å°çš„é‚£ä¸ªæ—‹åˆ°è¿™ä¸ªä½ç½®,å°†æ ¹æ—‹ä¸‹å»,ç„¶åå°†æ—‹ä¹‹åçš„æƒ…å†µè½¬åŒ–ä¸ºå‰å‡ ç§æƒ…å†µé€’å½’åˆ¤æ–­.</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Del</span><span class="params">(<span class="keyword">int</span> &amp;i,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T[i].v==v)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!L(i)||!R(i))&#123;<span class="comment">//å¦‚æœåªæœ‰0~1æ£µå­æ ‘</span></span><br><span class="line">            <span class="keyword">if</span>((!L(i))&amp;&amp;(!R(i)))&#123;<span class="comment">//å¦‚æœæ˜¯0æ£µå­æ ‘</span></span><br><span class="line">                T[i].size = <span class="number">0</span>;</span><br><span class="line">                i = <span class="number">0</span>;<span class="keyword">return</span>;</span><br><span class="line">            &#125;<span class="comment">//å¦‚æœæ˜¯1æ£µå­æ ‘</span></span><br><span class="line">            <span class="keyword">if</span>(!T[i].s[<span class="number">0</span>]) i = T[i].s[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">else</span>           i = T[i].s[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;<span class="comment">//å°†ä¼˜å…ˆçº§è¾ƒå¤§çš„æ—‹è½¬ä¸Šæ¥</span></span><br><span class="line">            <span class="keyword">int</span> f = T[L(i)].pri &gt; T[R(i)].pri;</span><br><span class="line">            Rot(i,f);</span><br><span class="line">            Del(T[i].s[f],v);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> Del(T[i].s[v&gt;T[i].v],v);</span><br><span class="line">    Update(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Another solution:<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top-right hint--error hint--large" aria-label="[Treapè¯¦ç»†ä»‹ç»](https://www.cnblogs.com/BCOI/p/9072444.html)
">[1]</span></a></sup></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delet</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!x) <span class="keyword">return</span>;<span class="comment">//é˜²æ­¢è¶Šç•Œ</span></span><br><span class="line">    <span class="keyword">if</span>(t[x].val == val)&#123;</span><br><span class="line">        <span class="keyword">if</span>(t[x].cnt &gt; <span class="number">1</span>)&#123;t[x].cnt--, t[x].size--;<span class="keyword">return</span>;&#125;<span class="comment">//æœ‰ç›¸åŒçš„å°±ç›´æ¥cnt--</span></span><br><span class="line">        <span class="keyword">bool</span> d = t[ls].rd &gt; t[rs].rd;</span><br><span class="line">        <span class="keyword">if</span>(ls == <span class="number">0</span> || rs == <span class="number">0</span>) x = ls+rs;<span class="comment">//åªæœ‰ä¸€ä¸ªå„¿å­å°±ç›´æ¥æŠŠé‚£ä¸ªå„¿å­æ”¾åˆ°è¿™ä¸ªä½ç½®</span></span><br><span class="line">        <span class="keyword">else</span> rotate(x, d), delet(x, val);<span class="comment">//å¦åˆ™å°†xæ—‹ä¸‹å»,æ‰¾ä¸€ä¸ªéšæœºå€¼å°çš„æ›¿ä»£,ç›´åˆ°å›åˆ°1,2ç§æƒ…å†µ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> t[x].size--, delet(t[x].ch[t[x].val&lt;val], val);<span class="comment">//é€’å½’æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æŸ¥æ’å"><a href="#æŸ¥æ’å" class="headerlink" title="æŸ¥æ’å"></a>æŸ¥æ’å</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ranks</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!i) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(T[i].v &gt;= v) <span class="keyword">return</span> ranks(L(i),v);</span><br><span class="line">    <span class="keyword">else</span>            <span class="keyword">return</span> T[L(i)].size + <span class="number">1</span> + ranks(R(i),v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æŸ¥å‰é©±åç»§"><a href="#æŸ¥å‰é©±åç»§" class="headerlink" title="æŸ¥å‰é©±åç»§"></a>æŸ¥å‰é©±åç»§</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">prev</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!i) <span class="keyword">return</span> -inf;</span><br><span class="line">    <span class="keyword">if</span>(T[i].v &lt; v) <span class="keyword">return</span> max(T[i].v,prev(R(i),v));</span><br><span class="line">    <span class="keyword">else</span>           <span class="keyword">return</span> prev(L(i),v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">succ</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!i) <span class="keyword">return</span> inf;</span><br><span class="line">    <span class="keyword">if</span>(T[i].v&gt; v) <span class="keyword">return</span> min(T[i].v,succ(L(i),v));</span><br><span class="line">    <span class="keyword">else</span>          <span class="keyword">return</span> succ(R(i),v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æŸ¥æ‰¾ç¬¬kå°æ•°"><a href="#æŸ¥æ‰¾ç¬¬kå°æ•°" class="headerlink" title="æŸ¥æ‰¾ç¬¬kå°æ•°"></a>æŸ¥æ‰¾ç¬¬kå°æ•°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Rank</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> kth)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T[L(i)].size + <span class="number">1</span> == kth) <span class="keyword">return</span> i;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(T[L(i)].size &gt;=kth) <span class="keyword">return</span> Rank(L(i),kth);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> Rank(R(i),kth - T[L(i)].size - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¾‹é¢˜è®²è§£"><a href="#ä¾‹é¢˜è®²è§£" class="headerlink" title="ä¾‹é¢˜è®²è§£"></a>ä¾‹é¢˜è®²è§£</h4><h5 id="POJ1442-Black-Box"><a href="#POJ1442-Black-Box" class="headerlink" title="POJ1442 Black Box "></a><a href="http://poj.org/problem?id=1442" target="_blank" rel="noopener">POJ1442 Black Box </a></h5><ul>
<li><p>é¢˜æ„ï¼šæœ‰ä¸€ä¸ªæ•°åˆ—ï¼Œåˆå§‹ä¸ºç©ºï¼Œå’Œä¸€ä¸ªindexï¼Œåˆå§‹æ˜¯0ã€‚ç»™å‡ºä¸¤ç§æ“ä½œï¼Œç¬¬ä¸€ç§æ˜¯å¾€æ•°åˆ—ä¸­æ·»åŠ ä¸€ä¸ªæ•°ï¼Œç¬¬äºŒç§æ˜¯å°†i++ï¼Œå†æŸ¥è¯¢æ•°åˆ—ä¸­ç¬¬iå°çš„æ•°æ˜¯å¤šå°‘ã€‚(æ“ä½œæ•°&lt;=3w)</p>
</li>
<li><p>åšæ³•ï¼š è£¸å¹³è¡¡æ ‘ã€‚</p>
</li>
<li><p>ä»£ç </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100100</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> L(i) (T[i].s[0])</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> R(i) (T[i].s[1])</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> For(i,n) for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Rep(i,l,r) for(int i=l;i&lt;=r;i++)</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">treap</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> size,s[<span class="number">2</span>],v,pri;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Sets</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">        size = <span class="number">1</span>;v = x;pri = y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;T[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,m,A[N],size,Lim,now,level = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> tot,root;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar(); <span class="keyword">int</span> num = <span class="number">0</span> , q = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(ch&gt;<span class="string">'9'</span>||ch&lt;<span class="string">'0'</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(ch==<span class="string">'-'</span>) q = <span class="number">-1</span>;</span><br><span class="line">        ch = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span>&amp;&amp;ch&lt;=<span class="string">'9'</span>)&#123;</span><br><span class="line">        num = num * <span class="number">10</span> + ch - <span class="string">'0'</span>;</span><br><span class="line">        ch = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> num * q;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    T[i].size = T[L(i)].size + T[R(i)].size + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rot</span><span class="params">(<span class="keyword">int</span> &amp;y,<span class="keyword">int</span> f)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = T[y].s[!f];</span><br><span class="line">    T[y].s[!f] = T[x].s[f];</span><br><span class="line">    T[x].s[f]  = y;</span><br><span class="line">    Update(y);Update(x);</span><br><span class="line">    y = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> &amp;i,<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!i)&#123;</span><br><span class="line">        T[i=++tot].Sets(val,rand());</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> f = T[i].v &gt; val;</span><br><span class="line">    Insert(T[i].s[!f],val);</span><br><span class="line">    <span class="keyword">if</span>(T[T[i].s[!f]].pri &gt; T[i].pri) Rot(i,f);</span><br><span class="line">    <span class="keyword">else</span>                             Update(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Rank</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> kth)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T[L(i)].size + <span class="number">1</span> == kth) <span class="keyword">return</span> i;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(T[L(i)].size &gt;=kth) <span class="keyword">return</span> Rank(L(i),kth);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> Rank(R(i),kth - T[L(i)].size - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    n = read(); m = read();</span><br><span class="line">    For(i,n) A[i] = read();</span><br><span class="line">    For(i,m) &#123;</span><br><span class="line">        Lim = read();</span><br><span class="line">        Rep(i,now+<span class="number">1</span>,Lim) Insert(root,A[i]); now = Lim;</span><br><span class="line">        level++;<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,T[Rank(root,level)].v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="POJ2299-Ultra-QuickSort"><a href="#POJ2299-Ultra-QuickSort" class="headerlink" title="POJ2299 Ultra-QuickSort "></a><a href="http://poj.org/problem?id=2299" target="_blank" rel="noopener">POJ2299 Ultra-QuickSort </a></h5><ul>
<li><p>é¢˜æ„ï¼šç»™å‡ºé•¿åº¦ä¸º$n(n&lt;50000)$çš„æ•°åˆ—,æ±‚å‡ºè¯¥æ•°åˆ—çš„é€†åºå¯¹æ•°ã€‚</p>
</li>
<li><p>åšæ³•ï¼šåŠ¨æ€æ’å…¥æ•°å­—ï¼Œæ¯æ¬¡æ’å…¥æ•°å­—åå¾—åˆ°æ•°å­—çš„å½“å‰æ’åï¼Œå½“å‰æ€»æ•°-å½“å‰æ’åå³ä¸ºè¯¥æ•°äº§ç”Ÿçš„é€†åºå¯¹æ•°ã€‚</p>
</li>
<li><p>ä»£ç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">500010</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Ch1 (T[i].s[0])</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Ch2 (T[i].s[1])</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> For(i,n) for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Rep(i,l,r) for(int i=l;i&lt;=r;i++)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;v)</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> ch=getchar();</span><br><span class="line">    <span class="keyword">int</span> num=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(ch&gt;<span class="string">'9'</span>||ch&lt;<span class="string">'0'</span>) ch=getchar();</span><br><span class="line">    <span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span>&amp;&amp;ch&lt;=<span class="string">'9'</span>)&#123;</span><br><span class="line">        num=num*<span class="number">10</span>+ch-<span class="string">'0'</span>;</span><br><span class="line">        ch=getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    v=num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">treap</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> v,size,pri;</span><br><span class="line">    <span class="keyword">int</span> s[<span class="number">2</span>];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Sets</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;v=x;pri=y;size=<span class="number">1</span>;&#125;</span><br><span class="line">&#125;T[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,x,cnt,root;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    T[i].size=T[Ch1].size+T[Ch2].size+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rot</span><span class="params">(<span class="keyword">int</span> &amp;y,<span class="keyword">int</span> f)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x=T[y].s[!f];</span><br><span class="line">    T[y].s[!f]=T[x].s[f];</span><br><span class="line">    T[x].s[f]=y;</span><br><span class="line">    Update(y);Update(x);</span><br><span class="line">    y=x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> &amp;i,<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!i)&#123;</span><br><span class="line">        T[i=++cnt].Sets(x,rand());</span><br><span class="line">        T[i].s[<span class="number">0</span>]=T[i].s[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> f=T[i].v&gt;x;</span><br><span class="line">    Insert(T[i].s[!f],x);</span><br><span class="line">    <span class="keyword">if</span>(T[T[i].s[!f]].pri&gt;T[i].pri) Rot(i,f);</span><br><span class="line">    <span class="keyword">else</span>                           Update(i);    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T[i].v==x) <span class="keyword">return</span> T[Ch1].size+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(T[i].v&lt;x) <span class="keyword">return</span> T[Ch1].size+<span class="number">1</span>+find(Ch2,x);</span><br><span class="line">    <span class="keyword">if</span>(T[i].v&gt;x) <span class="keyword">return</span> find(Ch1,x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(read(n),n)&#123;</span><br><span class="line">        ans=<span class="number">0</span>;</span><br><span class="line">        cnt=root=<span class="number">0</span>;</span><br><span class="line">        For(i,n)&#123;</span><br><span class="line">            read(x);</span><br><span class="line">            Insert(root,x);     </span><br><span class="line">            ans+=i-(find(root,x));         </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="BZOJ3196-TYVJ1730-äºŒé€¼å¹³è¡¡æ ‘"><a href="#BZOJ3196-TYVJ1730-äºŒé€¼å¹³è¡¡æ ‘" class="headerlink" title="BZOJ3196(TYVJ1730)äºŒé€¼å¹³è¡¡æ ‘"></a><a href="https://www.cnblogs.com/zjdx1998/p/3893440.html" target="_blank" rel="noopener">BZOJ3196(TYVJ1730)äºŒé€¼å¹³è¡¡æ ‘</a></h5><ul>
<li><p>é¢˜æ„ï¼š</p>
<blockquote>
<p>æ‚¨éœ€è¦å†™ä¸€ç§æ•°æ®ç»“æ„ï¼ˆå¯å‚è€ƒé¢˜ç›®æ ‡é¢˜ï¼‰ï¼Œæ¥ç»´æŠ¤ä¸€ä¸ªæœ‰åºæ•°åˆ—ï¼Œå…¶ä¸­éœ€è¦æä¾›ä»¥ä¸‹æ“ä½œï¼š </p>
<p>1.æŸ¥è¯¢kåœ¨åŒºé—´å†…çš„æ’å </p>
<p>2.æŸ¥è¯¢åŒºé—´å†…æ’åä¸ºkçš„å€¼ </p>
<p>3.ä¿®æ”¹æŸä¸€ä½å€¼ä¸Šçš„æ•°å€¼ </p>
<p>4.æŸ¥è¯¢kåœ¨åŒºé—´å†…çš„å‰é©±(å‰é©±å®šä¹‰ä¸ºå°äºxï¼Œä¸”æœ€å¤§çš„æ•°) </p>
<p>5.æŸ¥è¯¢kåœ¨åŒºé—´å†…çš„åç»§(åç»§å®šä¹‰ä¸ºå¤§äºxï¼Œä¸”æœ€å°çš„æ•°) </p>
</blockquote>
</li>
<li><p>åšæ³•ï¼Ÿ <a href="https://www.cnblogs.com/zjdx1998/p/3893440.html" target="_blank" rel="noopener">Code</a></p>
</li>
</ul>
<h4 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h4><ol>
<li><a href="http://poj.org/problem?id=3481" target="_blank" rel="noopener">POJ3481 Double Queue</a></li>
<li><a href="http://poj.org/problem?id=2352" target="_blank" rel="noopener">POJ2352 Stars</a></li>
</ol>
<h3 id="Splay"><a href="#Splay" class="headerlink" title="Splay"></a>Splay</h3><p>å¯ä»¥å…ˆçœ‹ä¸€çœ‹Treapä¸Splayç­‰å…¶ä»–å¹³è¡¡æ ‘çš„æ¯”è¾ƒ<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top-right hint--error hint--large" aria-label="[Treapä¸SBT, RBT, Splayæ¯”è¾ƒ](https://blog.csdn.net/lemonoil/article/details/71816386)
">[2]</span></a></sup>ã€‚</p>
<p>åŸºæœ¬æ¦‚å¿µä¸å†èµ˜è¿°ï¼Œåªä»‹ç»ä¸€ä¸‹Splayçš„ä¸‰ç§æ—‹è½¬ã€‚</p>
<h4 id="æ—‹è½¬-1"><a href="#æ—‹è½¬-1" class="headerlink" title="æ—‹è½¬"></a>æ—‹è½¬</h4><ul>
<li><p>Zig Step<sup id="fnref:4"><a href="#fn:4" rel="footnote"><span class="hint--top-right hint--error hint--large" aria-label="[Splay å­¦ä¹ ç¬”è®°](https://blog.csdn.net/changtao381/article/details/8936765)
">[4]</span></a></sup></p>
<blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="1349877709_4105.png" alt="Zig Step" title="">
                </div>
                <div class="image-caption">Zig Step</div>
            </figure>
<p>æ­¤å¤„æ—‹è½¬åŒTreapã€‚</p>
</blockquote>
</li>
<li><p>Zig-Zag Step</p>
<blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="1349877744_7090.png" alt="Zig-Zag Step" title="">
                </div>
                <div class="image-caption">Zig-Zag Step</div>
            </figure>
<p>å½“pä¸æ˜¯æ ¹èŠ‚ç‚¹ï¼Œä¸”xå’ŒpåŒä¸ºå·¦å­©å­æˆ–å³å­©å­æ—¶è¿›è¡ŒZig-Zigæ“ä½œã€‚</p>
<p>å½“xå’ŒpåŒä¸ºå·¦å­©å­æ—¶ï¼Œä¾æ¬¡å°†på’Œxå³æ—‹ï¼›</p>
<p>å½“xå’ŒpåŒä¸ºå³å­©å­æ—¶ï¼Œä¾æ¬¡å°†på’Œxå·¦æ—‹ã€‚</p>
</blockquote>
</li>
<li><p>Zig-Zig Step</p>
<blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="1349877779_5253.png" alt="Zig-Zig Step" title="">
                </div>
                <div class="image-caption">Zig-Zig Step</div>
            </figure>
<p>å½“pä¸æ˜¯æ ¹èŠ‚ç‚¹ï¼Œä¸”xå’Œpä¸åŒä¸ºå·¦å­©å­æˆ–å³å­©å­æ—¶ï¼Œè¿›è¡ŒZig-Zagæ“ä½œã€‚</p>
<p>å½“pä¸ºå·¦å­©å­ï¼Œxä¸ºå³å­©å­æ—¶ï¼Œå°†xå·¦æ—‹åå†å³æ—‹ã€‚</p>
<p>å½“pä¸ºå³å­©å­ï¼Œxä¸ºå·¦å­©å­æ—¶ï¼Œå°†xå³æ—‹åå†å·¦æ—‹ã€‚</p>
</blockquote>
</li>
</ul>
<p>å¯ä»¥å‘ç°ï¼Œæ‰€æœ‰æƒ…å†µéƒ½å¯ä»¥å½’ç»“ä¸ºä¸Šé¢ä¸‰ç§æ—‹è½¬ã€‚</p>
<p>é€šè¿‡æ·±åº¦ä¸º3çš„äºŒå‰æ ‘æ¨¡æ‹Ÿï¼Œå¯ä»¥æ€»ç»“å‡ºä¸‹è¿°å†™æ³•:<sup id="fnref:5"><a href="#fn:5" rel="footnote"><span class="hint--top-right hint--error hint--large" aria-label="[Splayä¼¸å±•æ ‘](https://blog.csdn.net/qq_30974369/article/details/77587168)
">[5]</span></a></sup></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fa(i) (T[i].p)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Loc(i) (T[fa(i)].s[1]==i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> For(i,n) for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Rep(i,l,r) for(int i=l;i&lt;=r;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Sets(P,i,tp) &#123;T[P].s[tp]=i; fa(i)=P;&#125; </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rot</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = i , y = fa(x) , z = fa(y);</span><br><span class="line">    <span class="keyword">int</span> lx = Loc(x) , ly = Loc(y) , lz = Loc(z);</span><br><span class="line">    Sets(y,T[x].s[!lx],lx);</span><br><span class="line">    Sets(z,i,ly);</span><br><span class="line">    Sets(i,y,!lx);</span><br><span class="line">    T[y].cnt[lx] = T[x].cnt[!lx];</span><br><span class="line">    T[x].cnt[!lx] = T[y].cnt[<span class="number">0</span>] + T[y].cnt[<span class="number">1</span>] + T[y].num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Splay</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> goal)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(;fa(i)!=goal;)&#123;</span><br><span class="line">        <span class="keyword">if</span>(fa(fa(i))!=goal) Rot(fa(i));</span><br><span class="line">        Rot(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!goal) root = i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ€æƒ³"><a href="#æ€æƒ³" class="headerlink" title="æ€æƒ³"></a>æ€æƒ³</h4><blockquote>
<p>Splay Treeå¯ä»¥æ–¹ä¾¿çš„è§£å†³ä¸€äº›åŒºé—´é—®é¢˜ï¼Œæ ¹æ®ä¸åŒå½¢çŠ¶äºŒå‰æ ‘å…ˆåºéå†ç»“æœä¸å˜çš„ç‰¹æ€§ï¼Œå¯ä»¥å°†åŒºé—´æŒ‰é¡ºåºå»ºäºŒå‰æŸ¥æ‰¾æ ‘ã€‚</p>
<p>æ¯æ¬¡è‡ªä¸‹è€Œä¸Šçš„ä¸€å¥—splayéƒ½å¯ä»¥å°†xç§»åŠ¨åˆ°æ ¹èŠ‚ç‚¹çš„ä½ç½®ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥æ–¹ä¾¿çš„åˆ©ç”¨Lazyçš„æ€æƒ³è¿›è¡ŒåŒºé—´æ“ä½œã€‚</p>
<p>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹è®°å½•sizeï¼Œä»£è¡¨å­æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®ï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŸ¥æ‰¾åŒºé—´ä¸­çš„ç¬¬kå°æˆ–ç¬¬kå¤§å…ƒç´ ã€‚</p>
<p><u>å¯¹äºä¸€æ®µè¦å¤„ç†çš„åŒºé—´[x, y]ï¼Œé¦–å…ˆsplay x-1åˆ°rootï¼Œå†splay y+1åˆ°rootçš„å³å­©å­ï¼Œè¿™æ—¶rootçš„å³å­©å­çš„å·¦å­©å­å¯¹åº”å­æ ‘å°±æ˜¯æ•´ä¸ªåŒºé—´ã€‚</u></p>
<p>è¿™æ ·ï¼Œå¤§éƒ¨åˆ†åŒºé—´é—®é¢˜éƒ½å¯ä»¥å¾ˆæ–¹ä¾¿çš„è§£å†³ï¼Œæ“ä½œåŒæ ·ä¹Ÿé€‚ç”¨äºä¸€ä¸ªæˆ–å¤šä¸ªæ¡ç›®çš„æ·»åŠ æˆ–åˆ é™¤ï¼Œå’ŒåŒºé—´çš„ç§»åŠ¨ã€‚</p>
</blockquote>
<p>å†æ¨èä¸€ç¯‡æ–‡ç« : <a href="https://blog.csdn.net/changtao381/article/details/8936765" target="_blank" rel="noopener">Splay Tree</a></p>
<h4 id="ä¾‹é¢˜è®²è§£-1"><a href="#ä¾‹é¢˜è®²è§£-1" class="headerlink" title="ä¾‹é¢˜è®²è§£"></a>ä¾‹é¢˜è®²è§£</h4><h5 id="éƒé—·çš„å‡ºçº³å‘˜"><a href="#éƒé—·çš„å‡ºçº³å‘˜" class="headerlink" title="éƒé—·çš„å‡ºçº³å‘˜"></a><a href="https://www.lydsy.com/JudgeOnline/problem.php?id=1503" target="_blank" rel="noopener">éƒé—·çš„å‡ºçº³å‘˜</a></h5><p>é¢˜æ„ï¼š</p>
<blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="1503_1.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure> 
</blockquote>
<p>åšæ³•ï¼šæˆ‘ä»¬å·²ç»å­¦è¿‡äº†treap,é‚£ä¹ˆè¿™é¢˜é‡‡ç”¨treapæ˜¯å¦å¯è¡Œï¼Ÿ</p>
<p>ç­”æ¡ˆå½“ç„¶æ˜¯å¯è¡Œçš„^_^, è§‰å¾—ä¸å¯è¡Œçš„é¢å£æ€è¿‡å»ã€‚è€Œä¸”è¿™é¢˜ä¹Ÿæ²¡æœ‰ç”¨splayçš„å¿…è¦ã€‚splayåªåœ¨å¤„ç†åŒºé—´é—®é¢˜æ—¶æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ï¼Œå…¶ä½™æƒ…å†µä¸‹å› ä¸ºå…¶ç¼–ç¨‹å¤æ‚åº¦ä¸ä½ï¼Œå¸¸æ•°è¾ƒå¤§ï¼Œæ•…å¤§éƒ¨åˆ†oierä¼˜å…ˆé‡‡ç”¨treapã€‚æœ¬é¢˜æ˜¯ä¸ªè£¸çš„splayï¼Œå¯¹æ•´ä½“æ‰“lazyæ ‡è®°å³å¯ï¼Œä½†è¦æ³¨æ„ä¸€ä¸ªå‘ç‚¹æ˜¯å¦‚æœåˆå§‹å·¥èµ„å°±å·²ç»ä½äºå·¥èµ„ä¸‹å±Šï¼Œè¿™ä¸ªå‘˜å·¥æ˜¯ä¸ç”¨è€ƒè™‘Insertçš„ã€‚</p>
<p>ä»£ç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fa(i) (T[i].p)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Loc(i) (T[fa(i)].s[1]==i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> For(i,n) for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Rep(i,l,r) for(int i=l;i&lt;=r;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Sets(P,i,tp) &#123;T[P].s[tp]=i; fa(i)=P;&#125; </span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">tnode</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> p,s[<span class="number">2</span>],v,num,cnt[<span class="number">2</span>];</span><br><span class="line">&#125;T[<span class="number">100100</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,Lim,mark,num,Left,root,tot;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rot</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = i , y = fa(x) , z = fa(y);</span><br><span class="line">    <span class="keyword">int</span> lx = Loc(x) , ly = Loc(y) , lz = Loc(z);</span><br><span class="line">    Sets(y,T[x].s[!lx],lx);</span><br><span class="line">    Sets(z,i,ly);</span><br><span class="line">    Sets(i,y,!lx);</span><br><span class="line">    T[y].cnt[lx] = T[x].cnt[!lx];</span><br><span class="line">    T[x].cnt[!lx] = T[y].cnt[<span class="number">0</span>] + T[y].cnt[<span class="number">1</span>] + T[y].num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Splay</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> goal)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(;fa(i)!=goal;)&#123;</span><br><span class="line">        <span class="keyword">if</span>(fa(fa(i))!=goal) Rot(fa(i));</span><br><span class="line">        Rot(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!goal) root = i;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> V,<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!i)&#123;</span><br><span class="line">        root=++tot;</span><br><span class="line">        T[tot].v = V;T[tot].p = <span class="number">0</span>;T[tot].num = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(T[i].v==V) T[i].num++;    </span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        T[i].cnt[V&gt;T[i].v]++;</span><br><span class="line">        <span class="keyword">if</span>(!T[i].s[V&gt;T[i].v])&#123;</span><br><span class="line">            T[i].s[V&gt;T[i].v]=++tot;</span><br><span class="line">            T[tot].v = V;T[tot].p = i;T[tot].num = <span class="number">1</span>;</span><br><span class="line">            Splay(tot,<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> Insert(V,T[i].s[V&gt;T[i].v]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">rank</span><span class="params">(<span class="keyword">int</span> kth,<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!i) <span class="keyword">return</span> i;</span><br><span class="line">    <span class="keyword">if</span>(T[i].cnt[<span class="number">1</span>]&lt;kth&amp;&amp;T[i].cnt[<span class="number">1</span>] + T[i].num &gt;= kth) <span class="keyword">return</span> i;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(kth&lt;T[i].cnt[<span class="number">1</span>]+T[i].num)  <span class="keyword">return</span> rank(kth,T[i].s[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">else</span>                               <span class="keyword">return</span> rank(kth-T[i].cnt[<span class="number">1</span>]-T[i].num,T[i].s[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Prev</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> Next = T[i].s[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">while</span>(T[Next].s[<span class="number">1</span>]) Next = T[Next].s[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> Next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    Left+=T[i].num;</span><br><span class="line">    Splay(i,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(T[i].s[<span class="number">0</span>])&#123;</span><br><span class="line">        Splay(Prev(i),i);</span><br><span class="line">        Sets(T[i].s[<span class="number">0</span>],T[i].s[<span class="number">1</span>],<span class="number">1</span>);</span><br><span class="line">        fa(T[i].s[<span class="number">0</span>]) = <span class="number">0</span>;</span><br><span class="line">        root = T[i].s[<span class="number">0</span>];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(T[i].s[<span class="number">1</span>])&#123;root=T[i].s[<span class="number">1</span>];fa(T[i].s[<span class="number">1</span>]) = <span class="number">0</span>;&#125;</span><br><span class="line">        <span class="keyword">else</span>          root = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    T[i].cnt[<span class="number">0</span>] = T[i].cnt[<span class="number">1</span>] = T[i].num = T[i].s[<span class="number">0</span>] = T[i].s[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;Lim);</span><br><span class="line">    For(i,n)&#123;<span class="keyword">char</span> op;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"\n%c %d"</span>,&amp;op,&amp;num);</span><br><span class="line">        T[<span class="number">0</span>].v = -mark - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="string">'I'</span>) </span><br><span class="line">          <span class="keyword">if</span>(num&gt;=Lim)  Insert(num-mark,root);</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="string">'A'</span>)     mark+=num;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="string">'F'</span>)     <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,T[rank(num,root)].v+mark);</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="string">'S'</span>)&#123;</span><br><span class="line">            mark-=num;</span><br><span class="line">            Rep(j,<span class="number">1</span>,tot)</span><br><span class="line">              <span class="keyword">if</span>(T[j].num&gt;<span class="number">0</span>&amp;&amp;T[j].v+mark&lt;Lim) Delete(j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,Left);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="tyvj1729æ–‡è‰ºå¹³è¡¡æ ‘"><a href="#tyvj1729æ–‡è‰ºå¹³è¡¡æ ‘" class="headerlink" title="tyvj1729æ–‡è‰ºå¹³è¡¡æ ‘"></a><a href="http://tyvj.cn/Problem_Show.aspx?id=1729" target="_blank" rel="noopener">tyvj1729æ–‡è‰ºå¹³è¡¡æ ‘</a></h5><p>(è¿™ä¸ªOJè²Œä¼¼å·²ç»æ”¹ç‰ˆäº†ï¼Œç°åœ¨çš„åå­—å«Joy OI, ä½ ä»¬å¯ä»¥è‡ªå·±æœä¸€ä¸‹)</p>
<p>é¢˜æ„ï¼š</p>
<blockquote>
<p>æ‚¨éœ€è¦å†™ä¸€ç§æ•°æ®ç»“æ„ï¼ˆå¯å‚è€ƒé¢˜ç›®æ ‡é¢˜ï¼‰ï¼Œæ¥ç»´æŠ¤ä¸€ä¸ªæœ‰åºæ•°åˆ—ï¼Œå…¶ä¸­éœ€è¦æä¾›ä»¥ä¸‹æ“ä½œï¼š ç¿»è½¬ä¸€ä¸ªåŒºé—´ï¼Œä¾‹å¦‚åŸæœ‰åºåºåˆ—æ˜¯5 4 3 2 1ï¼Œç¿»è½¬åŒºé—´æ˜¯[2,4]çš„è¯ï¼Œç»“æœæ˜¯5 2 3 4 1 </p>
</blockquote>
<p>åšæ³•ï¼šæˆ‘ä»¬å·²ç»å­¦è¿‡äº†treap, é‚£ä¹ˆè¿™é¢˜é‡‡ç”¨treapæ˜¯å¦å¯è¡Œå‘¢ï¼Ÿ</p>
<p>Splayå¯¹åŒºé—´çš„æ“ä½œã€lazyæ ‡è®°ã€‚ æˆ‘åˆšå­¦çš„æ—¶å€™ä¸€ç›´æ²¡æ‡‚è¿™ä¸ªsplayçš„æ“ä½œï¼Œå¯¹åŒºé—´[a,b]çš„æ“ä½œï¼Œé¦–å…ˆæŠŠa-1splayåˆ°æ ‘æ ¹ï¼Œç„¶åå†æŠŠb+1æ—‹è½¬åˆ°æ ‘æ ¹çš„å³å­æ ‘ã€‚è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œä½†æ˜¯æˆ‘ä¸€å¼€å§‹å†™çš„æ˜¯ç›´æ¥T[i].s[v&gt;T[i].v]è®¿é—®ï¼Œä¸€ç›´ä¸å¯¹ï¼Œä¸€ç›´å¾ˆçº³é—·ï¼Œåæ¥æ¨¡æ‹Ÿäº†ä¸€ä¸‹ï¼Œæ‰å‘ç°çœŸæ­£æœ‰æ•ˆçš„æ˜¯splayçš„æ’åï¼Œlazyæ ‡è®°ä¸‹ä¼ åï¼Œå·¦å³å­æ ‘è¢«äº¤æ¢ï¼Œä½†é»˜è®¤çš„æ’åæœªå˜ã€‚å³ç¬¬iå·å…ƒç´ ä¸ä¸€å®šå°±æ˜¯iã€‚ </p>
<p>ä»£ç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fa(i) (T[i].p)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Ch1 (T[i].s[0])</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Ch2 (T[i].s[1])</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Loc(i) (T[fa(i)].s[1]==i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Sets(a,b,c) &#123;T[a].s[c] = b;fa(b) = a;&#125;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> For(i,n) for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Rep(i,l,r) for(int i=l;i&lt;=r;i++)</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">tnode</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> s[<span class="number">2</span>],size,p,V,flag;</span><br><span class="line">&#125;T[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ttot,l,r,n,m,root;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pushdown</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(T[i].flag)&#123;</span><br><span class="line">        <span class="keyword">if</span>(Ch1) T[Ch1].flag ^= <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(Ch2) T[Ch2].flag ^= <span class="number">1</span>;</span><br><span class="line">        swap(Ch1,Ch2);</span><br><span class="line">        T[i].flag = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> p,<span class="keyword">int</span> &amp;i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l&gt;r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> m = ( l + r ) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    T[i=++ttot].V = m;</span><br><span class="line">    T[i].p = p; T[i].size = <span class="number">1</span>;</span><br><span class="line">    Build(l,m<span class="number">-1</span>,i,Ch1);</span><br><span class="line">    Build(m+<span class="number">1</span>,r,i,Ch2);</span><br><span class="line">    T[i].size = T[Ch1].size + T[Ch2].size + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rot</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> y = fa(x) , z = fa(y);</span><br><span class="line">    Pushdown(y);Pushdown(x);</span><br><span class="line">    <span class="keyword">int</span> lx = Loc(x) , ly = Loc(y);</span><br><span class="line">    Sets(y,T[x].s[!lx],lx);</span><br><span class="line">    Sets(z,x,ly);</span><br><span class="line">    Sets(x,y,!lx);</span><br><span class="line">    T[y].size = T[T[y].s[<span class="number">0</span>]].size + T[T[y].s[<span class="number">1</span>]].size + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Splay</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> goal)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(fa(i)!=goal)&#123;</span><br><span class="line">        <span class="keyword">if</span>(fa(fa(i))!=goal) Rot(fa(i));</span><br><span class="line">        Rot(i);</span><br><span class="line">    &#125;</span><br><span class="line">    T[i].size = T[Ch1].size + T[Ch2].size + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(!goal) root = i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> rank)</span></span>&#123;</span><br><span class="line">    Pushdown(i);</span><br><span class="line">    <span class="keyword">if</span>(T[Ch1].size + <span class="number">1</span> == rank) <span class="keyword">return</span> i;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(T[Ch1].size&gt;= rank) <span class="keyword">return</span> Find(Ch1,rank);</span><br><span class="line">    <span class="keyword">else</span>                        <span class="keyword">return</span> Find(Ch2,rank-T[Ch1].size<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OUT</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> rank)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!i) <span class="keyword">return</span>;</span><br><span class="line">    Pushdown(i);</span><br><span class="line">    OUT(Ch1,rank);</span><br><span class="line">    rank+=T[Ch1].size+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>((rank!=<span class="number">1</span>)&amp;&amp;(rank!=n+<span class="number">2</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(rank==n+<span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,T[i].V);</span><br><span class="line">        <span class="keyword">else</span>          <span class="built_in">printf</span>(<span class="string">"%d "</span>,T[i].V);</span><br><span class="line">    &#125;</span><br><span class="line">    OUT(Ch2,rank);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line">    Build(<span class="number">0</span>,n+<span class="number">1</span>,<span class="number">0</span>,root);</span><br><span class="line">    For(i,m)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;l,&amp;r);</span><br><span class="line">        Splay(Find(root,l),<span class="number">0</span>);</span><br><span class="line">        Splay(Find(root,r+<span class="number">2</span>),root);</span><br><span class="line">        T[T[T[root].s[<span class="number">1</span>]].s[<span class="number">0</span>]].flag ^= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    OUT(root,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç»ƒä¹ é¢˜-1"><a href="#ç»ƒä¹ é¢˜-1" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h4><ol>
<li><a href="https://www.lydsy.com/JudgeOnline/problem.php?id=1208" target="_blank" rel="noopener">HNOI2004å® ç‰©æ”¶å…»æ‰€</a></li>
<li><a href="https://www.lydsy.com/JudgeOnline/problem.php?id=1588" target="_blank" rel="noopener">HNOI2002è¥ä¸šé¢ç»Ÿè®¡</a></li>
<li><a href="https://www.lydsy.com/JudgeOnline/problem.php?id=1058" target="_blank" rel="noopener">ZJOI2007æŠ¥è¡¨ç»Ÿè®¡</a></li>
<li><a href="https://www.cnblogs.com/zjdx1998/p/3862572.html" target="_blank" rel="noopener">BZOJ1251åºåˆ—ç»ˆç»“è€…</a></li>
<li><a href="https://www.cnblogs.com/zjdx1998/p/3866606.html" target="_blank" rel="noopener">SCOI2013å¤šé¡¹å¼è¿ç®—</a></li>
<li><a href="https://www.lydsy.com/JudgeOnline/problem.php?id=1269" target="_blank" rel="noopener">AHOI2006æ–‡æœ¬ç¼–è¾‘å™¨</a></li>
<li><a href="http://poj.org/problem?id=3580" target="_blank" rel="noopener">POJ3580 SuperMemo</a>ï¼ˆå¿…åš)</li>
</ol>
<p>treapå’Œsplayçš„ç»ƒä¹ é¢˜å’Œä¾‹é¢˜éƒ½æ˜¯ä»¥å‰æˆ‘åšè¿‡çš„é¢˜ç›®,è™½ç„¶å¹´ä»£ä¹…è¿œä½†æ˜¯æ¯”è¾ƒç»å…¸ã€‚</p>
<p>å¦å¤–ï¼Œå¹³è¡¡æ ‘çš„å®ç”¨æ€§å…¶å®ä¸é«˜ï¼Œå·²ç»é€æ¸æ·¡å‡ºç®—æ³•ç«èµ›çš„èˆå°ï¼Œé€šè¿‡ä¾‹é¢˜å’Œç»ƒä¹ é¢˜æ‰€æ ‡å‡ºçš„å¹´ä»½ä¹Ÿä¸éš¾å‘ç°è¿™ä¸€ç‚¹ã€‚</p>
<p>å¹³è¡¡æ ‘æ·¡å‡ºé™¤äº†è¿‡äºæ¨¡æ¿ã€å®ç”¨æ€§ä¸é«˜ä»¥å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªåŸå› ï¼Œå°±æ˜¯C++çš„STLé‡Œå°è£…äº†RBT(çº¢é»‘æ ‘)ï¼Œå¤§å®¶å¯ä»¥å¤šå¤šå­¦ä¹ STLçš„å†…å®¹ã€‚</p>
<h3 id="STL"><a href="#STL" class="headerlink" title="STL"></a>STL</h3><p>STLç½‘ä¸Šæ•™ç¨‹ã€æ–‡ç« è¾ƒå¤šï¼Œæ­¤å¤„ä¸å¤šèµ˜è¿°ã€‚</p>
<p>ç»™å‡ºå¦‚ä¸‹å»ºè®®ï¼šæŒæ¡&gt;ç†Ÿæ‚‰&gt;äº†è§£</p>
<table>
<thead>
<tr>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">å»ºè®®</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">vectorã€mapã€set</td>
<td style="text-align:center">æŒæ¡</td>
</tr>
<tr>
<td style="text-align:center">upper_boundã€lower_bound</td>
<td style="text-align:center">æŒæ¡</td>
</tr>
<tr>
<td style="text-align:center">listã€stackã€deque</td>
<td style="text-align:center">äº†è§£</td>
</tr>
<tr>
<td style="text-align:center">multimapã€multiset</td>
<td style="text-align:center">ç†Ÿæ‚‰</td>
</tr>
<tr>
<td style="text-align:center">queueã€priority_queue</td>
<td style="text-align:center">æŒæ¡</td>
</tr>
</tbody>
</table>
<p>ç†Ÿç»ƒä½¿ç”¨è¿­ä»£å™¨(iterator)ï¼ŒæŒæ¡upper_boundï¼Œlower_boundç­‰å¸¸ç”¨æ–¹æ³•ï¼Œç†Ÿæ‚‰uniqueç­‰æ–¹æ³•ã€‚</p>
<h2 id="LCA"><a href="#LCA" class="headerlink" title="LCA"></a><center>LCA</center></h2><p>LCA(Least Common Ancestors)é—®é¢˜æ˜¯æŒ‡ç»™å®šä¸€æ£µæ ‘Tå’Œä¸¤ä¸ªèŠ‚ç‚¹uå’Œvï¼Œæ‰¾å‡ºuå’Œvçš„ç¦»æ ¹èŠ‚ç‚¹æœ€è¿œçš„å…¬å…±ç¥–å…ˆã€‚ </p>
<p>ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œæ±‚(3,12) , (14,4) , (7,9)çš„LCAã€‚</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="1209138-20170729151024207-1541824194.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure> 
<h3 id="Tarjanç®—æ³•"><a href="#Tarjanç®—æ³•" class="headerlink" title="Tarjanç®—æ³•"></a>Tarjanç®—æ³•</h3><p>â€‹    LCAçš„Tarjanç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(n+q)$ï¼Œæ˜¯ä¸€ç§ç¦»çº¿ç®—æ³•ï¼Œè¦ç”¨åˆ°å¹¶æŸ¥é›†ã€‚</p>
<p>ã€€ã€€Tarjanç®—æ³•åŸºäºdfsï¼Œåœ¨dfsçš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹ä½ç½®çš„è¯¢é—®åšå‡ºç›¸åº”çš„å›ç­”ã€‚</p>
<p>ã€€ã€€dfsçš„è¿‡ç¨‹ä¸­ï¼Œå½“ä¸€æ£µå­æ ‘è¢«æœç´¢å®Œæˆä¹‹åï¼Œå°±æŠŠä»–å’Œä»–çš„çˆ¶äº²åˆå¹¶æˆåŒä¸€é›†åˆï¼›åœ¨æœç´¢å½“å‰å­æ ‘èŠ‚ç‚¹çš„è¯¢é—®æ—¶ï¼Œå¦‚æœè¯¥è¯¢é—®çš„å¦ä¸€ä¸ªèŠ‚ç‚¹å·²ç»è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆè¯¥ç¼–å·çš„è¯¢é—®æ˜¯è¢«æ ‡è®°äº†çš„ï¼Œäºæ˜¯ç›´æ¥è¾“å‡ºå½“å‰çŠ¶æ€ä¸‹ï¼Œå¦ä¸€ä¸ªèŠ‚ç‚¹æ‰€åœ¨çš„å¹¶æŸ¥é›†çš„ç¥–å…ˆï¼›å¦‚æœå¦ä¸€ä¸ªèŠ‚ç‚¹è¿˜æ²¡æœ‰è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°±åšä¸‹æ ‡è®°ï¼Œç»§ç»­dfsã€‚</p>
<h4 id="ä¾‹é¢˜è®²è§£-2"><a href="#ä¾‹é¢˜è®²è§£-2" class="headerlink" title="ä¾‹é¢˜è®²è§£"></a>ä¾‹é¢˜è®²è§£</h4><h5 id="POJ-1330-Nearest-Common-Ancestors"><a href="#POJ-1330-Nearest-Common-Ancestors" class="headerlink" title="POJ 1330 Nearest Common Ancestors"></a><a href="http://poj.org/problem?id=1330" target="_blank" rel="noopener">POJ 1330 Nearest Common Ancestors</a></h5><p>é¢˜æ„ï¼šç»™å‡ºä¸€æ£µæ ‘ï¼Œ($n&lt;=10000$)ï¼Œè¯¢é—®ä¸¤ç‚¹é—´çš„LCAã€‚</p>
<p>ç›´æ¥ä¸Šä»£ç ï¼Œç»“åˆä»£ç ç†è§£ä¸€ä¸‹æµç¨‹ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,n) for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GetRoot rep(i,n)<span class="meta-keyword">if</span>(!indeg[i])&#123;root = i;break;&#125;</span></span><br><span class="line"><span class="keyword">int</span> u,v,n,head[N],indeg[N],root,ans;</span><br><span class="line"><span class="keyword">int</span> fa[N];<span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> es;</span><br><span class="line">    <span class="keyword">int</span> t,next;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;t = t; next=head[s];head[s]=es++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;</span><br><span class="line">        es=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line">        <span class="built_in">memset</span>(indeg,<span class="number">0</span>,<span class="keyword">sizeof</span>(indeg));</span><br><span class="line">        <span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;e[N];</span><br><span class="line"><span class="keyword">int</span> edge::es = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (fa[i]==i)?(i):(fa[i]=find(fa[i]));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Tarjan</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(ans) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[rt];i+<span class="number">1</span>;i=e[i].next)&#123;</span><br><span class="line">        Tarjan(e[i].t);</span><br><span class="line">        fa[find(e[i].t)]=rt;</span><br><span class="line">    &#125;</span><br><span class="line">    vis[rt]=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(rt==u &amp;&amp; vis[v]) ans = find(v);</span><br><span class="line">    <span class="keyword">if</span>(rt==v &amp;&amp; vis[u]) ans = find(u);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> _;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;_);</span><br><span class="line">    <span class="keyword">while</span>(_--)&#123;</span><br><span class="line">        ans=<span class="number">0</span>;edge::clear();</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);fa[n]=n;</span><br><span class="line">        rep(i,n<span class="number">-1</span>)&#123;</span><br><span class="line">            fa[i]=i;<span class="keyword">int</span> x,y;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</span><br><span class="line">            indeg[y]++;</span><br><span class="line">            e[edge::es].add(x,y);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;u,&amp;v);</span><br><span class="line">        GetRoot;</span><br><span class="line">        Tarjan(root);</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="HDU2586-How-far-away"><a href="#HDU2586-How-far-away" class="headerlink" title="HDU2586 How far away ?"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2586" target="_blank" rel="noopener">HDU2586 How far away ?</a></h5><p>é¢˜æ„ï¼šç»™å‡ºä¸€æ£µæ ‘ï¼Œ($n&lt;=40000$)ï¼Œæ¯æ¡è¾¹å‡æœ‰æƒå€¼ï¼Œè¯¢é—®ä¸¤ç‚¹é—´çš„æœ€çŸ­è·¯å¾„ã€‚</p>
<p>æ€è·¯ï¼šæ ‘ä¸Šä¸¤ç‚¹é—´çš„æœ€çŸ­è·¯å¾„å¾€å¾€è¦æƒ³åˆ°LCAï¼Œnoipè¿‘äº›å¹´ä¹Ÿæœ‰æ¶‰åŠã€‚</p>
<p>ä¸éš¾å‘ç°æ ‘ä¸­ä¸¤ç‚¹é—´æœ€çŸ­è·¯å¾„å³æ˜¯$d(u)+d(v)-2d(LCA)$,å…¶ä¸­$d(x)$æ˜¯$x$åˆ°æ ¹èŠ‚ç‚¹çš„è·ç¦»ã€‚</p>
<p>å¦å¤–æ³¨æ„ï¼Œæœ¬é¢˜ä¸­ç»™å‡ºçš„è™½æ˜¯æ— å‘å›¾ï¼Œä½†æ˜¯å¯ä»¥æŒ‰æœ‰å‘å›¾å¤„ç†å‡ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ–¹ä¾¿æ“ä½œã€‚</p>
<p>ä»£ç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">40010</span>;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; pii;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fx first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fy second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GetRoot(rt) rep(i,n)<span class="meta-keyword">if</span>(!indeg[i])&#123;rt = i;break;&#125;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> START int _;scanf(<span class="meta-string">"%d"</span>,&amp;_);while(_--)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,n) for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="keyword">int</span> dis[N],head[N],n,m,ans[N],fa[N],indeg[N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="built_in">vector</span>&lt;pii&gt; q[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> es;</span><br><span class="line">    <span class="keyword">int</span> t,next,v;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;</span><br><span class="line">        es=<span class="number">0</span>;</span><br><span class="line">        rep(i,n) &#123;</span><br><span class="line">            fa[i]=i;</span><br><span class="line">            q[i].clear();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">        <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line">        <span class="built_in">memset</span>(ans,<span class="number">0</span>,<span class="keyword">sizeof</span>(ans));</span><br><span class="line">        <span class="built_in">memset</span>(indeg,<span class="number">0</span>,<span class="keyword">sizeof</span>(indeg));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> w)</span></span>&#123;</span><br><span class="line">        v=w;t=y;next=head[x];head[x]=es++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;e[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> edge::es = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fa[k]==k?k:fa[k]=find(fa[k]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i+<span class="number">1</span>;i=e[i].next)&#123;</span><br><span class="line">        <span class="keyword">int</span> v=e[i].t; </span><br><span class="line">        dis[v]=dis[u]+e[i].v;</span><br><span class="line">        dfs(v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Tarjan</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i+<span class="number">1</span>;i=e[i].next)&#123;</span><br><span class="line">        <span class="keyword">int</span> v=e[i].t;</span><br><span class="line">        <span class="keyword">if</span>(vis[v]) <span class="keyword">continue</span>;</span><br><span class="line">        Tarjan(v);</span><br><span class="line">        fa[find(v)]=u;</span><br><span class="line">    &#125;</span><br><span class="line">    vis[u]=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;q[u].size();i++)</span><br><span class="line">        <span class="keyword">if</span>(vis[q[u][i].fx] &amp;&amp; !ans[q[u][i].fy])&#123;</span><br><span class="line">            ans[q[u][i].fy] = dis[q[u][i].fx] + dis[u] - <span class="number">2</span>*dis[find(q[u][i].fx)];</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    START&#123;<span class="keyword">int</span> rt,x,y,w;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line">        edge::clear();</span><br><span class="line">        rep(i,n<span class="number">-1</span>)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;x,&amp;y,&amp;w);</span><br><span class="line">            e[edge::es].add(x,y,w);</span><br><span class="line">            indeg[y]++;</span><br><span class="line">        &#125;</span><br><span class="line">        rep(i,m)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</span><br><span class="line">            q[x].push_back(mp(y,i));</span><br><span class="line">            q[y].push_back(mp(x,i));</span><br><span class="line">        &#125;</span><br><span class="line">        GetRoot(rt);</span><br><span class="line">        dis[rt]=<span class="number">0</span>;dfs(rt);</span><br><span class="line">        Tarjan(rt);</span><br><span class="line">        rep(i,m) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å€å¢"><a href="#å€å¢" class="headerlink" title="å€å¢"></a>å€å¢</h3><p>å€å¢ç®—æ³•å¤„ç†LCAé—®é¢˜éå¸¸å®¹æ˜“ç†è§£ï¼Œä¹Ÿä¸éš¾å†™ï¼Œåœ¨è¿‘äº›å¹´çš„noipã€NOIã€å†¬ä»¤è¥éƒ½æœ‰å‡ºç°ï¼Œå»ºè®®ç†Ÿç»ƒæŒæ¡ã€‚</p>
<p>åœ¨å¤„ç†(a,b)çš„LCAé—®é¢˜æ—¶ï¼Œä¸éš¾æƒ³åˆ°çš„ä¸€ç§æ€è·¯æ˜¯å°†(a,b)è°ƒè‡³åŒä¸€æ·±åº¦ï¼Œç„¶å(aâ€™,bâ€™)åŒæ—¶ä¸Š/ä¸‹è°ƒï¼Œä½¿å…¶åˆ°è¾¾åŒä¸€ä¸ªé¡¶ç‚¹ï¼Œè¿™ä¸ªé¡¶ç‚¹å°±æ˜¯(a,b)çš„LCAã€‚å€å¢ç®—æ³•å°±æ˜¯åŸºäºè¿™ç§æ€è·¯çš„ä¼˜åŒ–ï¼Œå…·ä½“ä¼˜åŒ–åœ¨è°ƒæ•´ä¸Šã€‚</p>
<p>è€ƒè™‘$fa(i,j)$è¡¨ç¤ºèŠ‚ç‚¹$i$,å‘ä¸Šè·³$2^j$ä¸ªå•ä½ååˆ°è¾¾çš„é¡¶ç‚¹ï¼Œé‚£ä¹ˆæ˜¾ç„¶$fa(i,j)=fa(fa(i,j-1),j-1)$ </p>
<p>ï¼ˆä¸æ˜¾ç„¶ï¼Ÿæ‰‹åŠ¨ç®—ç®—æˆ–è€…ä»”ç»†æƒ³æƒ³$fa(i,j-1)$å‘ä¸Šéœ€è¦è·³å¤šå°‘æ­¥æ‰èƒ½åˆ°$fa(i,j)$? )</p>
<p>æŒ‰ç…§ç±»ä¼¼çš„æ€è·¯æˆ‘ä»¬è¿˜å¯ä»¥ç»´æŠ¤$dis(i,j), max(i,j)$ç­‰ã€‚</p>
<h4 id="ä¾‹é¢˜è®²è§£-3"><a href="#ä¾‹é¢˜è®²è§£-3" class="headerlink" title="ä¾‹é¢˜è®²è§£"></a>ä¾‹é¢˜è®²è§£</h4><h5 id="NOIP2013T3-è´§è½¦è¿è¾“"><a href="#NOIP2013T3-è´§è½¦è¿è¾“" class="headerlink" title="NOIP2013T3 è´§è½¦è¿è¾“"></a><a href="https://www.smartoj.com/p/2511" target="_blank" rel="noopener">NOIP2013T3 è´§è½¦è¿è¾“</a></h5><p>é¢˜æ„ï¼šä¸€ä¸ªå¯èƒ½æœ‰é‡è¾¹çš„å›¾ï¼Œç»™å‡ºè‹¥å¹²ä¸ªè¯¢é—®ï¼Œæ±‚ç‚¹å¯¹é—´è·¯å¾„ä¸­çš„æœ€å°è¾¹çš„æœ€å¤§å€¼ã€‚</p>
<blockquote>
<p>å¯¹äº 30%çš„æ•°æ®ï¼Œ$0 &lt; n &lt; 1,000ï¼Œ0 &lt; m &lt; 10,000ï¼Œ0 &lt; q &lt; 1,000$ï¼›</p>
<p>å¯¹äº 60%çš„æ•°æ®ï¼Œ$0 &lt; n &lt; 1,000ï¼Œ0 &lt; m &lt; 50,000ï¼Œ0 &lt; q &lt; 1,000$ï¼›</p>
<p>å¯¹äº 100%çš„æ•°æ®ï¼Œ$0 &lt; n &lt; 10,000ï¼Œ0 &lt; m &lt; 50,000ï¼Œ0 &lt; q &lt; 30,000ï¼Œ0 â‰¤ z â‰¤ 100,000$ã€‚</p>
</blockquote>
<p>åšæ³•ï¼šå…¶å®åªéœ€å¯¹å›¾è·‘ä¸€ä¸ªæœ€å¤§ç”Ÿæˆæ ‘ï¼Œæš´åŠ›å¤„ç†è¯¢é—®å°±å¯ä»¥æ‹¿60åˆ†ã€‚å¯¹äº100%çš„è¯¢é—®ï¼Œç›´æ¥å€å¢LCAã€‚ </p>
<p>ä»£ç :</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">50010</span>*<span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">50010</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> logn 16</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> For(i,n) for(int i=1;i&lt;=n;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Rep(i,l,r) for(int i=l;i&lt;=r;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Down(i,r,l) for(int i=r;i&gt;=l;i--)</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> s,t,next,w;</span><br><span class="line">&#125;E[M*<span class="number">2</span>],TE[M];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> q,n,m,Es,s,t,w;</span><br><span class="line"><span class="keyword">int</span> f[N],fa[N][logn+<span class="number">20</span>],deep[N],Min[N][logn+<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> head[N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">makelist</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span></span>&#123;</span><br><span class="line">    E[Es].s = s;E[Es].t = t; E[Es].w = w; </span><br><span class="line">    E[Es].next = head[s];head[s] = Es++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(edge A,edge B)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> A.w &gt; B.w;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (f[i]==i)?(i):(find(f[i]));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);    </span><br><span class="line">    For(i,n) f[i] = i;</span><br><span class="line">    For(i,m)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;s,&amp;t,&amp;w);</span><br><span class="line">        TE[i].s = s;TE[i].t = t;TE[i].w = w;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(TE+<span class="number">1</span>,TE+m+<span class="number">1</span>,cmp);</span><br><span class="line">    For(i,m)&#123;</span><br><span class="line">        <span class="keyword">int</span> fx = find(TE[i].s) , fy = find(TE[i].t);</span><br><span class="line">        <span class="keyword">if</span>(fx!=fy) &#123;</span><br><span class="line">            f[fx] = fy;</span><br><span class="line">            makelist(TE[i].s,TE[i].t,TE[i].w);</span><br><span class="line">            makelist(TE[i].t,TE[i].s,TE[i].w);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;            </span><br><span class="line">    vis[i] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> p=head[i];p!=<span class="number">-1</span>;p=E[p].next)</span><br><span class="line">        <span class="keyword">if</span>(!vis[E[p].t])&#123;</span><br><span class="line">            <span class="keyword">int</span> v = E[p].t;fa[v][<span class="number">0</span>] = i;</span><br><span class="line">            deep[v] = deep[i] + <span class="number">1</span>;</span><br><span class="line">            Min[v][<span class="number">0</span>] = E[p].w; </span><br><span class="line">            For(j,logn)&#123;</span><br><span class="line">                fa[v][j] = fa[fa[v][j<span class="number">-1</span>]][j<span class="number">-1</span>];</span><br><span class="line">                Min[v][j] = min(Min[v][j<span class="number">-1</span>],Min[fa[v][j<span class="number">-1</span>]][j<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            DFS(v);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LCA</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">2147483647</span>;<span class="keyword">if</span>(deep[u] &lt; deep[v]) swap(u,v);</span><br><span class="line">    <span class="keyword">int</span> d = deep[u] - deep[v];</span><br><span class="line">    Rep(i,<span class="number">0</span>,logn)</span><br><span class="line">        <span class="keyword">if</span>((<span class="number">1</span>&lt;&lt;i)&amp;d) &#123;ans = min(ans,Min[u][i]);u = fa[u][i];&#125;</span><br><span class="line">    <span class="keyword">if</span>(u==v) <span class="keyword">return</span> ans;</span><br><span class="line">    Down(i,logn,<span class="number">0</span>)</span><br><span class="line">      <span class="keyword">if</span>(fa[u][i]!=fa[v][i])&#123;</span><br><span class="line">          ans = min(min(Min[u][i],Min[v][i]),ans);</span><br><span class="line">          u = fa[u][i];v = fa[v][i];</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">if</span>(u!=v)&#123;</span><br><span class="line">        ans = min(ans,min(Min[u][<span class="number">0</span>],Min[v][<span class="number">0</span>]));</span><br><span class="line">        u = fa[u][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    init();</span><br><span class="line">    For(i,n)</span><br><span class="line">      <span class="keyword">if</span>(!deep[i])&#123;deep[i] = <span class="number">1</span>;DFS(i);&#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;q);</span><br><span class="line">    For(i,q)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;s,&amp;t);</span><br><span class="line">        <span class="keyword">if</span>(find(s)!=find(t)) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">else</span>                 <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,LCA(s,t));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="NOIP2015-T6-è¿è¾“è®¡åˆ’"><a href="#NOIP2015-T6-è¿è¾“è®¡åˆ’" class="headerlink" title="NOIP2015 T6 è¿è¾“è®¡åˆ’"></a><a href="http://uoj.ac/problem/150" target="_blank" rel="noopener">NOIP2015 T6 è¿è¾“è®¡åˆ’</a></h5><p>é¢˜æ„ï¼šç»™å‡º$n(&lt;=300000)$ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œå’Œ$m(&lt;=300000)$ä¸ªè¯¢é—®ç‚¹å¯¹é—´æœ€çŸ­è·ç¦»ã€‚è¦æ±‚é€‰æ‹©ä¸€æ¡è¾¹ï¼Œä½¿è¯¥è¾¹æƒå€¼ä¸º0åï¼Œæ±‚å‡ºmä¸ªè¯¢é—®çš„æœ€å¤§å€¼æœ€å°ã€‚</p>
<p>æ ·ä¾‹ï¼š<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="1533147876533.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<p>æ€è€ƒï¼š</p>
<blockquote>
<p>æˆ‘å‚åŠ äº†è¿™ä¸€å¹´çš„è€ƒè¯•ï¼Œæ²¡è®°é”™çš„è¯æš´åŠ›+å¥‡æŠ€æ·«å·§åº”è¯¥èƒ½æ‹¿åˆ°60åˆ†ï¼Ÿç°åœ¨é’ˆå¯¹100%çš„æ•°æ®æ¥çœ‹ã€‚</p>
<p>åˆ†æå®Œé¢˜ç›®ä¹‹åå‘ç°å…¶å®å°±æ˜¯â€œæœ€å¤§å€¼æœ€å°â€ç±»é—®é¢˜ï¼Œç¬¬ä¸€ååº”æ˜¯äºŒåˆ†ã€‚å°†æ‰€æœ‰è¯¢é—®å¤„ç†å‡ºæ¥åï¼ˆæ€ä¹ˆå¤„ç†ï¼Ÿï¼‰ï¼Œæ¯æ¬¡äºŒåˆ†ç­”æ¡ˆ$ans$ï¼Œå¯¹è¶…å‡ºç­”æ¡ˆçš„è¯¢é—®å¤„ç†ï¼Œæ€ä¹ˆå¤„ç†å‘¢?</p>
<p>æ˜¾ç„¶ï¼Œå¯¹è¶…å‡ºç­”æ¡ˆçš„æ‰€æœ‰è¯¢é—®çš„è·¯å¾„æ±‚äº¤ï¼Œäº¤å‡ºçš„è·¯å¾„ä¸­æ±‚å‡ºæœ€å¤§çš„è¾¹$max$ï¼Œä»¥$ans-max$ä¸ºäºŒåˆ†ä¾æ®å³å¯ã€‚</p>
<p>è·¯å¾„æ±‚äº¤ï¼Œé‡‡ç”¨å·®åˆ†ï¼ˆä¹Ÿæœ‰å«æ ‘ä¸Šå‰ç¼€å’Œï¼‰ï¼šåœ¨æ ‘ä¸­å°†æ‰€æœ‰è·¯å¾„èµ·ã€å§‹æƒå€¼+1ï¼ŒLCAæƒå€¼-2ï¼Œä»æ‰€æœ‰å¶èŠ‚ç‚¹å¾€ä¸Šç´¯åŠ ï¼Œæœ€ç»ˆæƒå€¼ä¸ºè·¯å¾„æ•°çš„ç‚¹åˆ°å…¶çˆ¶äº²çš„è¾¹ä¸ºæ‰€æ±‚è¾¹ã€‚</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="1533149366004.png" alt="](1533149352380.png)![" title="">
                </div>
                <div class="image-caption">](1533149352380.png)![</div>
            </figure>
<p>æ—¶é—´å¤æ‚åº¦ï¼š$O(mlogn+(m+n)logL) $</p>
</blockquote>
<h3 id="RMQã€æ ‘é“¾å‰–åˆ†"><a href="#RMQã€æ ‘é“¾å‰–åˆ†" class="headerlink" title="RMQã€æ ‘é“¾å‰–åˆ†"></a>RMQã€æ ‘é“¾å‰–åˆ†</h3><p>å±•å¼€è®²å¾ˆè´¹æ—¶é—´ï¼Œè¿˜æ˜¯æ¨èå‡ ç¯‡æ–‡ç« ï¼š</p>
<ol>
<li><a href="https://blog.csdn.net/chenzhenyu123456/article/details/47359859" target="_blank" rel="noopener">LCAè½¬RMQ</a></li>
<li><a href="https://blog.csdn.net/hell2pradise/article/details/5815959" target="_blank" rel="noopener">RMQä¸LCA(From TopCoder Algorithm Tutorials)</a></li>
<li><a href="https://blog.csdn.net/wazwaztime/article/details/51416187" target="_blank" rel="noopener">æ ‘é“¾å‰–åˆ†æ±‚LCA</a></li>
<li><a href="https://www.cnblogs.com/fuyun-boy/p/6045709.html" target="_blank" rel="noopener">æ ‘å‰–æ±‚LCA</a></li>
<li><a href="https://blog.csdn.net/Nightmare_ak/article/details/77164374" target="_blank" rel="noopener">æ ‘å‰–æ³•</a></li>
</ol>
<h3 id="ç»ƒä¹ é¢˜-2"><a href="#ç»ƒä¹ é¢˜-2" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><ol>
<li><a href="http://poj.org/problem?id=1470" target="_blank" rel="noopener">POJ1470Closest Common Ancestors</a> </li>
<li><a href="http://poj.org/problem?id=1986" target="_blank" rel="noopener">POJ1986Distance Queries</a> </li>
<li>NOIp2012 ç–«æƒ…æ§åˆ¶</li>
</ol>
<h2 id="DPä¼˜åŒ–"><a href="#DPä¼˜åŒ–" class="headerlink" title="DPä¼˜åŒ–"></a><center>DPä¼˜åŒ–</center></h2><p>DPä¼˜åŒ–æœ‰å¾ˆå¤šç§ç±»å‹ï¼Œå¸¸è§çš„æœ‰ä¸‹é¢å››ç§ã€‚<sup id="fnref:6"><a href="#fn:6" rel="footnote"><span class="hint--top-right hint--error hint--large" aria-label="[DPä¼˜åŒ–å°ç»“](https://blog.csdn.net/qq_35649707/article/details/77834685)
">[6]</span></a></sup><sup id="fnref:7"><a href="#fn:7" rel="footnote"><span class="hint--top-right hint--error hint--large" aria-label="[å¸¸è§DPä¼˜åŒ–ç±»å‹æ€»ç»“](https://wenku.baidu.com/view/675f3b820d22590102020740be1e650e52eacff0.html)
">[7]</span></a></sup></p>
<h3 id="æ•°æ®ç»“æ„ä¼˜åŒ–"><a href="#æ•°æ®ç»“æ„ä¼˜åŒ–" class="headerlink" title="æ•°æ®ç»“æ„ä¼˜åŒ–"></a>æ•°æ®ç»“æ„ä¼˜åŒ–</h3><h4 id="çº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„"><a href="#çº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„" class="headerlink" title="çº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„"></a>çº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„</h4><p>è¿™ç±»é—®é¢˜çš„çŠ¶æ€æ–¹ç¨‹ä¸€èˆ¬éƒ½ä¸æ˜¯å¾ˆéš¾ï¼Œå¾€å¾€åˆ†æä¹‹åéƒ½èƒ½å¾—å‡ºå¸¸è§çš„å¦‚LISï¼ˆæœ€é•¿ä¸Šå‡å­åºåˆ—ï¼‰ç­‰æ¨¡å‹ã€‚</p>
<h5 id="NOIP2013T5-èŠ±åŒ "><a href="#NOIP2013T5-èŠ±åŒ " class="headerlink" title="NOIP2013T5 èŠ±åŒ "></a><a href="https://www.luogu.org/problemnew/show/P1970" target="_blank" rel="noopener">NOIP2013T5 èŠ±åŒ </a></h5><blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="1533188420861.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>å…¶å®æ˜¯ä¸ªå¾ˆç®€å•çš„dpï¼Œè®¾$f[i][j]$è¡¨ç¤ºå‰iä½å…¶ä¸­ç¬¬$i$ä½çŠ¶æ€ä¸º$j$çš„æ–¹æ¡ˆæ•°ï¼Œ$j=0,1$åˆ†åˆ«ä»£è¡¨ä½å’Œé«˜ï¼Œé‚£ä¹ˆ</p>
<p>$f[i][j]=max{f[k][j\text{^}1]}+1$,å…¶ä¸­$h[i],h[k]$éœ€è¦æ»¡è¶³ç›¸åº”çš„æ¡ä»¶ã€‚</p>
<p>å¯¹$j$åˆ†ç±»è®¨è®ºï¼Œå¦‚å½“$j=0$æ—¶,$f[i][0]=max{f[j][1]} + 1 , h[j]&gt;h[i]$ï¼Œé‚£ä¹ˆåªéœ€å¯¹$h$å»ºæ ‘ï¼Œåœ¨$h[i]\text{~}\infty$æ‰¾æœ€å¤§å€¼å³å¯ã€‚</p>
</blockquote>
<h4 id="å•è°ƒæ ˆã€å•è°ƒé˜Ÿåˆ—"><a href="#å•è°ƒæ ˆã€å•è°ƒé˜Ÿåˆ—" class="headerlink" title="å•è°ƒæ ˆã€å•è°ƒé˜Ÿåˆ—"></a>å•è°ƒæ ˆã€å•è°ƒé˜Ÿåˆ—</h4><p>è¿™ç±»é—®é¢˜çš„æ ¸å¿ƒæ˜¯å•è°ƒï¼Œè€ƒè™‘$f[i]=min{f[j]+w[i]}$ï¼Œå¦‚æœ$w[i]$å•è°ƒå¢ï¼Œåˆ™åªéœ€ç”¨é€’å‡çš„å•è°ƒé˜Ÿåˆ—ç»´æŠ¤$f[j]$å³å¯ã€‚</p>
<h5 id="Vijos1243ç”Ÿäº§å•†å“-8"><a href="#Vijos1243ç”Ÿäº§å•†å“-8" class="headerlink" title="Vijos1243ç”Ÿäº§å•†å“[8]"></a><a href="https://vijos.org/p/1243" target="_blank" rel="noopener">Vijos1243ç”Ÿäº§å•†å“</a><sup id="fnref:8"><a href="#fn:8" rel="footnote"><span class="hint--top-right hint--error hint--large" aria-label="[å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–dpä¾‹é¢˜](http://www.cnblogs.com/Zars19/p/7163367.html)">[8]</span></a></sup></h5><p>é¢˜æ„ï¼šæœ‰$n$ä¸ªä»»åŠ¡ï¼Œ$m$ä¸ªæœºå™¨ï¼Œæ¯ä¸ªæœºå™¨å®Œæˆæ¯ä¸ªä»»åŠ¡éƒ½æœ‰ç‰¹å®šçš„æ—¶é—´ï¼Œä»»åŠ¡å¿…é¡»ä¾æ¬¡å®Œæˆï¼Œä¸”ä¸€ä¸ªæœºå™¨åªèƒ½è¿ç»­å®Œæˆ$l$ä¸ªä»»åŠ¡ï¼Œæ¯æ¬¡æ›´æ¢æœºå™¨éœ€è¦æ—¶é—´$k$ï¼Œæ±‚å®Œæˆæ‰€æœ‰ä»»åŠ¡çš„æœ€çŸ­æ—¶é—´ã€‚($n&lt;=100000,m&lt;=5$)</p>
<p>åˆ†æï¼šé¦–å…ˆé¢„å¤„ç†$s[i][j]$ä¸ºç¬¬$i$ä¸ªæœºå™¨å®Œæˆå‰$j$ä¸ªä»»åŠ¡æ‰€éœ€è¦çš„æ—¶é—´,$f[i][j]$ä¸ºå®Œæˆå‰$i$ä¸ªä»»åŠ¡ä¸”ç¬¬$i$ä¸ªä»»åŠ¡ä¸º$j$å·æœºå™¨å®Œæˆçš„æ—¶é—´ï¼Œé‚£ä¹ˆæœ‰å¦‚ä¸‹çš„è½¬ç§»æ–¹ç¨‹</p>
<p>$f[i][j] = min{f[k][p] +s[j][i]-s[j][k]} , i-l&lt;=k&lt;i$,æ˜¾ç„¶ï¼Œè¿™æ ·åšçš„æ—¶é—´å¤æ‚åº¦æ˜¯$O(nm^2l)$,ä½†æ˜¯å°†å¼å­å˜å½¢æˆ$f[i][j] = min{f[k][p] -s[j][k]} +s[j][i] , i-l&lt;=k&lt;i$, å°±ä¸éš¾å‘ç°äº†å•è°ƒæ€§ï¼Œæ­¤æ—¶å¯ä»¥ç”¨å•è°ƒé˜Ÿåˆ—ç»´æŠ¤ï¼Œå¤æ‚åº¦å˜æˆäº†$O(nm^2)$ã€‚</p>
<p>å•è°ƒæ ˆå…¶å®å’Œå•è°ƒé˜Ÿåˆ—ç±»ä¼¼ï¼Œéƒ½æ˜¯åˆ†æå•è°ƒæ€§ã€‚å…·ä½“å¯ä»¥åšåšç»ƒä¹ é¢˜6ã€‚</p>
<h3 id="æ–œç‡ä¼˜åŒ–"><a href="#æ–œç‡ä¼˜åŒ–" class="headerlink" title="æ–œç‡ä¼˜åŒ–"></a>æ–œç‡ä¼˜åŒ–</h3><p>å¯¹äº$f[i]=min{f[j] + (x[i]-x[j])^2}$å½¢è½¬ç§»æ–¹ç¨‹ï¼Œå°†å…¶å±•å¼€åå¾—åˆ°$f[i]=min{f[j]+x[j]^2+x[i]^2-2 x[i]x[j]}$,æ˜¾ç„¶ï¼Œå¦‚æœæ²¡æœ‰æœ€åçš„äº¤å‰é¡¹ï¼Œå¯ä»¥ç”¨å•è°ƒé˜Ÿåˆ—ç»´æŠ¤ã€‚ç°åœ¨æœ‰äº†è¿™ä¸ªäº¤å‰é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘æ–œç‡ä¼˜åŒ–ã€‚</p>
<h4 id="HDU3507Print-Article"><a href="#HDU3507Print-Article" class="headerlink" title="HDU3507Print Article"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3507" target="_blank" rel="noopener">HDU3507Print Article</a></h4><p>è¯¥é¢˜çš„è½¬ç§»æ–¹ç¨‹å…¶å®å°±æ˜¯$f[i]=min{f[j]+x[j]^2+x[i]^2-2 x[i]x[j]+m}$,å’Œä¸Šå¼åŸºæœ¬ç›¸åŒã€‚è€ƒè™‘$k&lt;j&lt;i$, ä¸”ç”¨$j$æ›´æ–°æ¯”ç”¨$k$æ›´æ–°å¥½ã€‚åˆ™æœ‰$f[j]+(x[i]-x[j])^2+m &lt; f[k]+(x[i]-x[k])^2 +m$,ç§»é¡¹åŒ–ç®€å¾— $\frac{(f[j]+x[j]^2)-(f[k]+x[k]^2)}{x[j]-x[k]}&lt;2 x[i]$ï¼Œæ­¤æ—¶ä»¤$Y[j]=(f[j])+x[j]^2) , Y[k]=(f[k]+x[k]^2) , X[i]=x[i] , F[i]=2 x[i]$, åˆ™ä¸Šå¼å˜ä¸º$\frac{Y[j]-Y[k]}{X[j]-X[k]}&lt;F[i]$,è¯¥å¼å°±æ˜¯æœ€ç»å…¸çš„æ–œç‡å¼ï¼Œæ¢è¨€ä¹‹ï¼Œåªè¦æ»¡è¶³ä¸Šå¼ï¼Œé€‰$j$ä¸€å®šæ¯”é€‰$k$ä¼˜ã€‚å…¶å®åŒ–ç®€å¾—æ ¸å¿ƒå°±æ˜¯åˆ©ç”¨å•è°ƒé˜Ÿåˆ—ç»´æŠ¤æ–œç‡ã€‚</p>
<h3 id="å››è¾¹å½¢ä¼˜åŒ–"><a href="#å››è¾¹å½¢ä¼˜åŒ–" class="headerlink" title="å››è¾¹å½¢ä¼˜åŒ–"></a>å››è¾¹å½¢ä¼˜åŒ–</h3><p>æ¨èæ–‡ç« ï¼š<a href="https://blog.csdn.net/noiau/article/details/72514812" target="_blank" rel="noopener">å››è¾¹å½¢ä¸ç­‰å¼ä¼˜åŒ–è®²è§£ï¼ˆè¯¦è§£ï¼‰</a></p>
<h3 id="çŸ©é˜µåŠ é€Ÿ"><a href="#çŸ©é˜µåŠ é€Ÿ" class="headerlink" title="çŸ©é˜µåŠ é€Ÿ"></a>çŸ©é˜µåŠ é€Ÿ</h3><p>å¤§å®¶å¯¹æ–æ³¢é‚£å¥‘æ•°åˆ—ä¸€å®šéƒ½éå¸¸ç†Ÿæ‚‰ï¼Œ$f(n)=f(n-1)+f(n-2)$ï¼Œæ˜¾ç„¶å¯¹äº$n&lt;=1e8$æ˜¯å¯ä»¥è½»æ¾å¤„ç†çš„ï¼Œä½†æ˜¯å¦‚æœå½“néå¸¸å¤§ï¼Œæ¯”å¦‚$n&gt;1000000000$ï¼Œå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ </p>
<p>å¼•å…¥çŸ©é˜µï¼š$$M =  \begin{bmatrix} 0&amp; 1  \newline 1 &amp; 1  \end{bmatrix} ï¼Œf_n=\begin{bmatrix} f(n-1)\newline f(n)\end{bmatrix} ,f_{n+1} = \begin{bmatrix}f(n) \newline f(n+1)\end{bmatrix}$$,é‚£ä¹ˆæ˜¾ç„¶$f_{n+1}=M \cdot f_n$ï¼Œæ¢è¨€ä¹‹$f_{n+1} = M^n \cdot f_1$ã€‚æˆ‘ä»¬çŸ¥é“æ™®é€šæ•°å­—çš„$n$æ¬¡å¹‚æ˜¯å¯ä»¥é€šè¿‡å¿«é€Ÿå¹‚æ±‚å‡ºçš„ï¼ŒçŸ©é˜µä¹Ÿæœ‰ç±»ä¼¼çš„æ€§è´¨ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡‡ç”¨çŸ©é˜µå¿«é€Ÿå¹‚çš„æ–¹æ³•ä¼˜åŒ–dpçš„è½¬ç§»æ–¹ç¨‹ã€‚</p>
<p>å…³äºçŸ©é˜µå¿«é€Ÿå¹‚ï¼Œå¯ä»¥åšç»å…¸ä¾‹é¢˜<a href="http://poj.org/problem?id=3233" target="_blank" rel="noopener">POJ3233 Matrix Power Series</a></p>
<h4 id="ä¾‹é¢˜è®²è§£-4"><a href="#ä¾‹é¢˜è®²è§£-4" class="headerlink" title="ä¾‹é¢˜è®²è§£"></a>ä¾‹é¢˜è®²è§£</h4><h5 id="HDU5950-Recursive-sequence"><a href="#HDU5950-Recursive-sequence" class="headerlink" title="HDU5950 Recursive sequence"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5950" target="_blank" rel="noopener">HDU5950 Recursive sequence</a></h5><p>é¢˜é¢ï¼š<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="1533186362463.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<p>è¿™é¢˜æ˜¯2016 ACM-ICPC æ²ˆé˜³ç«™çš„é“œç‰Œé¢˜ï¼Œé¢˜ç›®æ„æ€å…¶å®å°±æ˜¯æ±‚$an=2a_{n-2}+a_{n-1}$.å…¶ä¸­$n&gt;=3, a_1 = a ,a_2 =b$ç»™å‡ºã€‚</p>
<p>ç”±äº$n&lt;2^{31}$ï¼Œæ•…è€ƒè™‘çŸ©é˜µåŠ é€Ÿ,æ„é€ çŸ©é˜µ$$M=\begin{bmatrix} 0&amp;1 \newline 2&amp;1 \end{bmatrix}$$å³å¯ã€‚</p>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>å¦‚çŠ¶å‹dpã€æ•°ä½dpã€æ ‘å‹dpç­‰æ˜¯ç‰¹æ®Šå½¢å¼çš„dpï¼Œä¹Ÿå»ºè®®å¤§å®¶æ‰¾æ‰¾ä¾‹é¢˜ç»ƒä¹ æŒæ¡ã€‚</p>
<h3 id="ç»ƒä¹ é¢˜-3"><a href="#ç»ƒä¹ é¢˜-3" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><ol>
<li><p>ã€Easyã€‘<a href="https://www.luogu.org/problemnew/show/P1939" target="_blank" rel="noopener">çŸ©é˜µåŠ é€Ÿ</a></p>
</li>
<li><p>ã€Mediumã€‘<a href="https://www.lydsy.com/JudgeOnline/problem.php?id=1009" target="_blank" rel="noopener">HNOI2008GTè€ƒè¯•</a>(ç»“åˆkmp)</p>
</li>
<li><p>ã€Mediumã€‘ <a href="https://www.lydsy.com/JudgeOnline/problem.php?id=1297" target="_blank" rel="noopener">SCOI2009è¿·è·¯</a></p>
</li>
<li><p>ã€Easyã€‘<a href="http://poj.org/problem?id=3017" target="_blank" rel="noopener">POJ3017Cut the Sequence</a>]</p>
</li>
<li><p>ã€Hardã€‘<a href="http://www.lydsy.com/JudgeOnline/problem.php?id=1791" target="_blank" rel="noopener">BZOJ1791:Island</a> </p>
</li>
<li><p>ã€Mediumã€‘ <a href="https://www.lydsy.com/JudgeOnline/problem.php?id=1010" target="_blank" rel="noopener">HNOI2008ç©å…·è£…ç®±toy</a></p>
</li>
<li><p>ã€åˆé›†ã€‘<a href="https://blog.csdn.net/shiyongyang/article/details/78299894?readlog" target="_blank" rel="noopener">æ–œç‡ä¼˜åŒ– å…¥é—¨ç»å…¸</a></p>
</li>
<li><blockquote>
<p>bzoj1096 [ZJOI2007]ä»“åº“å»ºè®¾</p>
<p>bzoj1597 [USACP2008 Mar]åœŸåœ°è´­ä¹° </p>
<p>bzoj1911 [Apio2010]ç‰¹åˆ«è¡ŒåŠ¨é˜Ÿ </p>
<p>bzoj3156 é˜²å¾¡å‡†å¤‡ </p>
<p>bzoj3675[Apio2014] åºåˆ—åˆ†å‰² </p>
<p>bzoj3437 å°Pçš„ç‰§åœº </p>
<p>bzoj4518 [SDOI2016] å¾é€”</p>
</blockquote>
</li>
</ol>
<center><strong>ç”±äºæœ¬äººæ°´å¹³æœ‰é™ï¼Œå¦‚æœ‰é”™è¯¯æ•¬è¯·æ‰¹è¯„æŒ‡æ­£ã€‚</strong></center>

<p><center><font size="6"> æœ€åç¥åŒå­¦ä»¬åœ¨æ¥ä¸‹æ¥çš„NOIpã€å†¬ä»¤è¥ã€çœé€‰ä¸­å–å¾—å¥½æˆç»©ï¼</font><center></center></center></p>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://www.cnblogs.com/BCOI/p/9072444.html" target="_blank" rel="noopener">Treapè¯¦ç»†ä»‹ç»</a><a href="#fnref:1" rev="footnote"> â†©</a></span></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://blog.csdn.net/lemonoil/article/details/71816386" target="_blank" rel="noopener">Treapä¸SBT, RBT, Splayæ¯”è¾ƒ</a><a href="#fnref:2" rev="footnote"> â†©</a></span></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://www.cnblogs.com/fengzhiyuan/articles/7994428.html" target="_blank" rel="noopener">treapå­¦ä¹ æ€»ç»“</a><a href="#fnref:3" rev="footnote"> â†©</a></span></li><li id="fn:4"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">4.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://blog.csdn.net/changtao381/article/details/8936765" target="_blank" rel="noopener">Splay å­¦ä¹ ç¬”è®°</a><a href="#fnref:4" rev="footnote"> â†©</a></span></li><li id="fn:5"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">5.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://blog.csdn.net/qq_30974369/article/details/77587168" target="_blank" rel="noopener">Splayä¼¸å±•æ ‘</a><a href="#fnref:5" rev="footnote"> â†©</a></span></li><li id="fn:6"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">6.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://blog.csdn.net/qq_35649707/article/details/77834685" target="_blank" rel="noopener">DPä¼˜åŒ–å°ç»“</a><a href="#fnref:6" rev="footnote"> â†©</a></span></li><li id="fn:7"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">7.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://wenku.baidu.com/view/675f3b820d22590102020740be1e650e52eacff0.html" target="_blank" rel="noopener">å¸¸è§DPä¼˜åŒ–ç±»å‹æ€»ç»“</a><a href="#fnref:7" rev="footnote"> â†©</a></span></li><li id="fn:8"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">8.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="http://www.cnblogs.com/Zars19/p/7163367.html" target="_blank" rel="noopener">å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–dpä¾‹é¢˜</a><a href="#fnref:8" rev="footnote"> â†©</a></span></li></ol></div></div>
        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2018-08-02T16:46:11.382Z" itemprop="dateUpdated">2018-08-03 00:46:11</time>
</span><br>


        
        æ„Ÿè°¢æ‚¨é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æ‚¨æœ‰ä»»ä½•ç–‘é—®ï¼Œå¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºï¼Œæˆ–é‚®ä»¶è”ç³»æˆ‘ï¼
        
    </div>
    
    <footer>
        <a href="http://www.zjdx1998.ml">
            <img src="/img/avatar.jpg" alt="Jerome">
            Jerome
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">èµ</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ACM/">ACM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LCA/">LCA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dp/">dp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dpä¼˜åŒ–/">dpä¼˜åŒ–</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/äºŒåˆ†/">äºŒåˆ†</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/å¹³è¡¡æ ‘/">å¹³è¡¡æ ‘</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/è´ªå¿ƒ/">è´ªå¿ƒ</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/&title=ã€Š2018SummerHZOIè®¨è®ºã€‹ â€” æµ™æ±Ÿå¤§å‚»å±Œ's Blog&pic=http://www.zjdx1998.ml/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/&title=ã€Š2018SummerHZOIè®¨è®ºã€‹ â€” æµ™æ±Ÿå¤§å‚»å±Œ's Blog&source=æµ™æ±Ÿå¤§å‚»å±Œçš„åšå®¢" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š2018SummerHZOIè®¨è®ºã€‹ â€” æµ™æ±Ÿå¤§å‚»å±Œ's Blog&url=http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/&via=http://www.zjdx1998.ml" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between flex-row-reverse">
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/07/15/acmtraingningjuly/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">2018æš‘æœŸACMè®­ç»ƒè®°å½•</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'false' == 'true',
            appId: "PeRp6A5RyU3g4FfBLzwRoUhJ-gzGzoHsz",
            appKey: "jYlLQOKQP9jG5dUSrEjiBI5e",
            avatar: "mm",
            placeholder: "æ¬¢è¿ç•™è¨€~",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->







</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        è°¢è°¢å¤§çˆ·~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        ç«™ç‚¹æ€»è®¿å®¢æ•°ï¼š<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        ç«™ç‚¹æ€»è®¿é—®é‡ï¼š<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>åšå®¢å†…å®¹éµå¾ª <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Jerome &copy; 2018</span>
            <span>
                
                Power by Jerome Thanks Theme indigo
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/&title=ã€Š2018SummerHZOIè®¨è®ºã€‹ â€” æµ™æ±Ÿå¤§å‚»å±Œ's Blog&pic=http://www.zjdx1998.ml/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/&title=ã€Š2018SummerHZOIè®¨è®ºã€‹ â€” æµ™æ±Ÿå¤§å‚»å±Œ's Blog&source=æµ™æ±Ÿå¤§å‚»å±Œçš„åšå®¢" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š2018SummerHZOIè®¨è®ºã€‹ â€” æµ™æ±Ÿå¤§å‚»å±Œ's Blog&url=http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/&via=http://www.zjdx1998.ml" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.zjdx1998.ml/2018/08/02/2018SummerHZOI/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACI0lEQVR42u3ay27DMAxE0fz/T7tAVgHc0DMcGa2p65Xhp44WhEjq9ZKP433U559XztfPd8/fqd9dcMCAAeOxjKM8lOHmd+tpqp+HAQPGPgw9yCaRMAnuF2OGAQMGjDJ0usvH3jdhwIABo5e41oNQFoI1DAYMGDDcJDYvtOkp7o25OAwYMB7IWNUYuOP8D/obMGDA+GeMo3XkU9BrG3x9FwYMGKMZSeG+l6zqE6QntDBgwJjN0F/Wk9s7FpoXUwkDBowNGPr2LLcBWRfXlrUwYcCAMZrhFu6TZ/Swm7Q2YcCAMY/hhlGdkVy3JwUGDBijGb0lXa/e1WsbuBs1YMCAMZXhDjQJl+5+CeVJGDBgzGboBbV6iabczd+SklgYMGAMZSSpZlImc3eFfP07DBgwNmDY+W4wCPdfzZ4GDBgwBjGSsprxAzkcN5sBMGDAGM1wQ2qyfKyHa889DBgwNmPkRfy8rKY3CX45hwEDxmiG2x7Q0079SAAwYMDYjeGWvVyAu66zi3owYMDYjKEAemmqO0R9CmDAgDGboYddd8nYS3R7xUEYMGBMZfQSzlWFNj2sX3wNBgwYoxlJl1AHuxsy9C/AgAFjH0YyIL1h4AZWO8WFAQPGBgy3ZN/bopFsAruAwYABA0arYaCXzNwtHVqXAAYMGDsy9GWf/uVbSmkwYMAYynBbj+7mMDdxtducMGDAGM1YFZR7gdVNVu0lIwwYMJ7N+AGVdWC+L8wRzwAAAABJRU5ErkJggg==" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>




<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = 'å¹²å˜›å‘¢ï¼';
            clearTimeout(titleTime);
        } else {
            document.title = 'æ¬¢è¿å›æ¥!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
